{"remainingRequest":"/home/netsuretsu/Desktop/ecp/node_modules/babel-loader/lib/index.js!/home/netsuretsu/Desktop/ecp/node_modules/vue-cli-plugin-quasar/lib/loader.js.transform-quasar-imports.js!/home/netsuretsu/Desktop/ecp/node_modules/eslint-loader/index.js??ref--14-0!/home/netsuretsu/Desktop/ecp/src/api/auth.js","dependencies":[{"path":"/home/netsuretsu/Desktop/ecp/src/api/auth.js","mtime":1646391901688},{"path":"/home/netsuretsu/Desktop/ecp/babel.config.js","mtime":1646391901612},{"path":"/home/netsuretsu/Desktop/ecp/node_modules/cache-loader/dist/cjs.js","mtime":1645750062537},{"path":"/home/netsuretsu/Desktop/ecp/node_modules/babel-loader/lib/index.js","mtime":1645750062530},{"path":"/home/netsuretsu/Desktop/ecp/node_modules/vue-cli-plugin-quasar/lib/loader.js.transform-quasar-imports.js","mtime":1645750100417},{"path":"/home/netsuretsu/Desktop/ecp/node_modules/eslint-loader/index.js","mtime":1645750077678}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIi9ob21lL25ldHN1cmV0c3UvRGVza3RvcC9lY3Avbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudmFsdWVzLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3ltYm9sLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3ltYm9sLmRlc2NyaXB0aW9uLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLmxpbmsuanMiOwppbXBvcnQgInJlZ2VuZXJhdG9yLXJ1bnRpbWUvcnVudGltZS5qcyI7CmltcG9ydCB7IGp3dCB9IGZyb20gIi4vYmFzZVVSTCI7CmltcG9ydCB7IGFwaSB9IGZyb20gIi4vYmFzZVVSTCI7CmV4cG9ydCBkZWZhdWx0IHsKICBnZXRBZG1pblRva2VuOiBmdW5jdGlvbiBnZXRBZG1pblRva2VuKCkgewogICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZSgpIHsKICAgICAgdmFyIGFkbWluLCByZXM7CiAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICBhZG1pbiA9IHsKICAgICAgICAgICAgICAgIHVzZXJuYW1lOiAiYWRtaW4iLAogICAgICAgICAgICAgICAgcGFzc3dvcmQ6ICJhZG1pbnJvb3QiCiAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMzsKICAgICAgICAgICAgICByZXR1cm4gand0LnBvc3QoInRva2VuIiwgYWRtaW4pOwoKICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgIHJlcyA9IF9jb250ZXh0LnNlbnQ7CiAgICAgICAgICAgICAgY29uc29sZS5sb2cocmVzLmRhdGEpOwogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5hYnJ1cHQoInJldHVybiIsIHJlcy5kYXRhLnRva2VuKTsKCiAgICAgICAgICAgIGNhc2UgNjoKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSwgX2NhbGxlZSk7CiAgICB9KSkoKTsKICB9LAogIGdldFVzZXJUb2tlbjogZnVuY3Rpb24gZ2V0VXNlclRva2VuKHVzZXIpIHsKICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUyKCkgewogICAgICB2YXIgcmVzOwogICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTIkKF9jb250ZXh0MikgewogICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0Mi5wcmV2ID0gX2NvbnRleHQyLm5leHQpIHsKICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gMjsKICAgICAgICAgICAgICByZXR1cm4gand0LnBvc3QoInRva2VuIiwgdXNlcik7CgogICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgcmVzID0gX2NvbnRleHQyLnNlbnQ7CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5hYnJ1cHQoInJldHVybiIsIHJlcy5kYXRhLnRva2VuKTsKCiAgICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLnN0b3AoKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0sIF9jYWxsZWUyKTsKICAgIH0pKSgpOwogIH0sCiAgbG9naW46IGZ1bmN0aW9uIGxvZ2luKHVzZXIpIHsKICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTMoKSB7CiAgICAgIHZhciB0b2tlbiwgcmVzOwogICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTMkKF9jb250ZXh0MykgewogICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0My5wcmV2ID0gX2NvbnRleHQzLm5leHQpIHsKICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gMjsKICAgICAgICAgICAgICByZXR1cm4gX3RoaXMuZ2V0VXNlclRva2VuKHVzZXIpOwoKICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgIHRva2VuID0gX2NvbnRleHQzLnNlbnQ7CiAgICAgICAgICAgICAgYXBpLmRlZmF1bHRzLmhlYWRlcnMuY29tbW9uWyJBdXRob3JpemF0aW9uIl0gPSAiQmVhcmVyICIuY29uY2F0KHRva2VuKTsKICAgICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDY7CiAgICAgICAgICAgICAgcmV0dXJuIGFwaS5nZXQoInVzZXJzL21lIiwgdXNlcik7CgogICAgICAgICAgICBjYXNlIDY6CiAgICAgICAgICAgICAgcmVzID0gX2NvbnRleHQzLnNlbnQ7CgogICAgICAgICAgICAgIF90aGlzLmJ1aWxkVXNlcihyZXMuZGF0YSk7CgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDMuYWJydXB0KCJyZXR1cm4iLCByZXMuZGF0YSk7CgogICAgICAgICAgICBjYXNlIDk6CiAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0My5zdG9wKCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9LCBfY2FsbGVlMyk7CiAgICB9KSkoKTsKICB9LAogIGJ1aWxkVXNlcjogZnVuY3Rpb24gYnVpbGRVc2VyKGRhdGEpIHsKICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWU0KCkgewogICAgICB2YXIgdG9rZW47CiAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlNCQoX2NvbnRleHQ0KSB7CiAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQ0LnByZXYgPSBfY29udGV4dDQubmV4dCkgewogICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgX2NvbnRleHQ0Lm5leHQgPSAyOwogICAgICAgICAgICAgIHJldHVybiBfdGhpczIuZ2V0QWRtaW5Ub2tlbigpOwoKICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgIHRva2VuID0gX2NvbnRleHQ0LnNlbnQ7CiAgICAgICAgICAgICAgYXBpLmRlZmF1bHRzLmhlYWRlcnMuY29tbW9uWyJBdXRob3JpemF0aW9uIl0gPSAiQmVhcmVyICIuY29uY2F0KHRva2VuKTsKICAgICAgICAgICAgICBhcGkuZ2V0KCJ1c2Vycy8iICsgZGF0YS5pZCwgewogICAgICAgICAgICAgICAgcGFyYW1zOiB7CiAgICAgICAgICAgICAgICAgIGNvbnRleHQ6ICJlZGl0IgogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgICAgICAgICAgdmFyIGRhdGEgPSByZXMuZGF0YTsKICAgICAgICAgICAgICAgIHZhciB1c2VyID0gewogICAgICAgICAgICAgICAgICBhdmF0YXJzOiBPYmplY3QudmFsdWVzKGRhdGFbImF2YXRhcl91cmxzIl0pLAogICAgICAgICAgICAgICAgICBjYXBhYmlsaXRpZXM6IGRhdGEuY2FwYWJpbGl0aWVzLAogICAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogZGF0YS5kZXNjcmlwdGlvbiwKICAgICAgICAgICAgICAgICAgZW1haWw6IGRhdGEuZW1haWwsCiAgICAgICAgICAgICAgICAgIGZpc3ROYW1lOiBkYXRhLmZpcnN0X25hbWUsCiAgICAgICAgICAgICAgICAgIGlkOiBkYXRhLmlkLAogICAgICAgICAgICAgICAgICBsYXN0TmFtZTogZGF0YS5sYXN0X25hbWUsCiAgICAgICAgICAgICAgICAgIGxpbms6IGRhdGEubGluaywKICAgICAgICAgICAgICAgICAgbGlua3M6IGRhdGFbIl9saW5rcyJdLnNlbGYsCiAgICAgICAgICAgICAgICAgIGxvY2FsZTogZGF0YS5sb2NhbGUsCiAgICAgICAgICAgICAgICAgIG5pY2tuYW1lOiBkYXRhLm5pY2tuYW1lLAogICAgICAgICAgICAgICAgICBwYXNzd29yZDogZGF0YS5wYXNzd29yZCwKICAgICAgICAgICAgICAgICAgcm9sZXM6IGRhdGEucm9sZXMsCiAgICAgICAgICAgICAgICAgIHNsdWc6IGRhdGEuc2x1ZywKICAgICAgICAgICAgICAgICAgdXNlcm5hbWU6IGRhdGEudXNlcm5hbWUKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICByZXR1cm4gdXNlcjsKICAgICAgICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZSkgewogICAgICAgICAgICAgICAgY29uc29sZS5sb2coZSk7CiAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICBjYXNlIDU6CiAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0NC5zdG9wKCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9LCBfY2FsbGVlNCk7CiAgICB9KSkoKTsKICB9LAogIHVzZXI6IGZ1bmN0aW9uIHVzZXIoKSB7CiAgICB2YXIgdXNlciA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCJ1c2VyIik7CgogICAgaWYgKHVzZXIpIHsKICAgICAgdXNlciA9IEpTT04ucGFyc2UodXNlcik7CiAgICAgIHJldHVybiB7CiAgICAgICAgaWQ6IHVzZXIuaWQsCiAgICAgICAgdXNlcm5hbWU6IHVzZXIudXNlcm5hbWUsCiAgICAgICAgcGFzc3dvcmQ6IHVzZXIucGFzc3dvcmQsCiAgICAgICAgY2FwYWJpbGl0aWVzOiB1c2VyLmNhcGFiaWxpdGllcywKICAgICAgICByb2xlczogdXNlci5yb2xlcywKICAgICAgICB0b2tlbjogdXNlci50b2tlbgogICAgICB9OwogICAgfQoKICAgIHJldHVybiB7fTsKICB9Cn07"},{"version":3,"sources":["/home/netsuretsu/Desktop/ecp/src/api/auth.js"],"names":["jwt","api","getAdminToken","admin","username","password","post","res","console","log","data","token","getUserToken","user","login","defaults","headers","common","get","buildUser","id","params","context","then","avatars","Object","values","capabilities","description","email","fistName","first_name","lastName","last_name","link","links","self","locale","nickname","roles","slug","catch","e","localStorage","getItem","JSON","parse"],"mappings":"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","sourcesContent":["import { jwt } from \"./baseURL\";\nimport { api } from \"./baseURL\";\n\nexport default {\n  async getAdminToken() {\n    const admin = {\n      username: \"admin\",\n      password: \"adminroot\",\n    };\n    const res = await jwt.post(\"token\", admin);\n    console.log(res.data);\n    return res.data.token;\n  },\n\n  async getUserToken(user) {\n    const res = await jwt.post(\"token\", user);\n    return res.data.token;\n  },\n\n  async login(user) {\n    const token = await this.getUserToken(user);\n    api.defaults.headers.common[\"Authorization\"] = `Bearer ${token}`;\n    const res = await api.get(\"users/me\", user);\n    this.buildUser(res.data);\n    return res.data;\n  },\n\n  async buildUser(data) {\n    const token = await this.getAdminToken();\n    api.defaults.headers.common[\"Authorization\"] = `Bearer ${token}`;\n    api\n      .get(\"users/\" + data.id, {\n        params: {\n          context: \"edit\",\n        },\n      })\n      .then((res) => {\n        const data = res.data;\n        const user = {\n          avatars: Object.values(data[\"avatar_urls\"]),\n          capabilities: data.capabilities,\n          description: data.description,\n          email: data.email,\n          fistName: data.first_name,\n          id: data.id,\n          lastName: data.last_name,\n          link: data.link,\n          links: data[\"_links\"].self,\n          locale: data.locale,\n          nickname: data.nickname,\n          password: data.password,\n          roles: data.roles,\n          slug: data.slug,\n          username: data.username,\n        };\n        return user;\n      })\n      .catch((e) => {\n        console.log(e);\n      });\n  },\n\n  user() {\n    var user = localStorage.getItem(\"user\");\n    if (user) {\n      user = JSON.parse(user);\n      return {\n        id: user.id,\n        username: user.username,\n        password: user.password,\n        capabilities: user.capabilities,\n        roles: user.roles,\n        token: user.token,\n      };\n    }\n    return {};\n  },\n};\n"]}]}