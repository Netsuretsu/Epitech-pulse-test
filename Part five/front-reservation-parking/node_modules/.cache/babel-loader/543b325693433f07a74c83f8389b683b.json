{"remainingRequest":"/home/netsuretsu/Rendu/Epitech-pulse-test/Part five/front-reservation-parking/node_modules/babel-loader/lib/index.js!/home/netsuretsu/Rendu/Epitech-pulse-test/Part five/front-reservation-parking/node_modules/vue-cli-plugin-quasar/lib/loader.js.transform-quasar-imports.js!/home/netsuretsu/Rendu/Epitech-pulse-test/Part five/front-reservation-parking/node_modules/quasar/src/utils/morph.js","dependencies":[{"path":"/home/netsuretsu/Rendu/Epitech-pulse-test/Part five/front-reservation-parking/node_modules/quasar/src/utils/morph.js","mtime":1645750057943},{"path":"/home/netsuretsu/Rendu/Epitech-pulse-test/Part five/front-reservation-parking/babel.config.js","mtime":1646391901612},{"path":"/home/netsuretsu/Rendu/Epitech-pulse-test/Part five/front-reservation-parking/node_modules/cache-loader/dist/cjs.js","mtime":1645750062537},{"path":"/home/netsuretsu/Rendu/Epitech-pulse-test/Part five/front-reservation-parking/node_modules/babel-loader/lib/index.js","mtime":1645750062530},{"path":"/home/netsuretsu/Rendu/Epitech-pulse-test/Part five/front-reservation-parking/node_modules/vue-cli-plugin-quasar/lib/loader.js.transform-quasar-imports.js","mtime":1645750100417}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF90eXBlb2YgZnJvbSAiL2hvbWUvbmV0c3VyZXRzdS9SZW5kdS9FcGl0ZWNoLXB1bHNlLXRlc3QvUGFydCBmaXZlL2Zyb250LXJlc2VydmF0aW9uLXBhcmtpbmcvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL3R5cGVvZi5qcyI7CmltcG9ydCBfb2JqZWN0U3ByZWFkIGZyb20gIi9ob21lL25ldHN1cmV0c3UvUmVuZHUvRXBpdGVjaC1wdWxzZS10ZXN0L1BhcnQgZml2ZS9mcm9udC1yZXNlcnZhdGlvbi1wYXJraW5nL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9vYmplY3RTcHJlYWQyLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucGFyc2UtaW50LmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLmV4ZWMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5yZWdleHAudGVzdC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmluZGV4LW9mLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnJlcGxhY2UuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuc3BsaXQuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5qb2luLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmlsdGVyLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm51bWJlci5jb25zdHJ1Y3Rvci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmluY2x1ZGVzLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmlsbC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnBhcnNlLWZsb2F0LmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZXJyb3IudG8tc3RyaW5nLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZGF0ZS50by1zdHJpbmcuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5yZWdleHAudG8tc3RyaW5nLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0LmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkucmV2ZXJzZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi50aW1lcnMuanMiOwppbXBvcnQgeyBpc1BsYWluT2JqZWN0IH0gZnJvbSAnLi9wcml2YXRlL2lzJzsKdmFyIGlkID0gMDsKdmFyIG9mZnNldEJhc2UgPSB2b2lkIDA7CgpmdW5jdGlvbiBnZXRBYnNvbHV0ZVBvc2l0aW9uKGVsLCByZXNpemUpIHsKICBpZiAob2Zmc2V0QmFzZSA9PT0gdm9pZCAwKSB7CiAgICBvZmZzZXRCYXNlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7CiAgICBvZmZzZXRCYXNlLnN0eWxlLmNzc1RleHQgPSAncG9zaXRpb246IGFic29sdXRlOyBsZWZ0OiAwOyB0b3A6IDAnOwogICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChvZmZzZXRCYXNlKTsKICB9CgogIHZhciBib3VuZGluZ1JlY3QgPSBlbC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTsKICB2YXIgYmFzZVJlY3QgPSBvZmZzZXRCYXNlLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpOwoKICB2YXIgX3dpbmRvdyRnZXRDb21wdXRlZFN0ID0gd2luZG93LmdldENvbXB1dGVkU3R5bGUoZWwpLAogICAgICBtYXJnaW5MZWZ0ID0gX3dpbmRvdyRnZXRDb21wdXRlZFN0Lm1hcmdpbkxlZnQsCiAgICAgIG1hcmdpblJpZ2h0ID0gX3dpbmRvdyRnZXRDb21wdXRlZFN0Lm1hcmdpblJpZ2h0LAogICAgICBtYXJnaW5Ub3AgPSBfd2luZG93JGdldENvbXB1dGVkU3QubWFyZ2luVG9wLAogICAgICBtYXJnaW5Cb3R0b20gPSBfd2luZG93JGdldENvbXB1dGVkU3QubWFyZ2luQm90dG9tOwoKICB2YXIgbWFyZ2luSCA9IHBhcnNlSW50KG1hcmdpbkxlZnQsIDEwKSArIHBhcnNlSW50KG1hcmdpblJpZ2h0LCAxMCk7CiAgdmFyIG1hcmdpblYgPSBwYXJzZUludChtYXJnaW5Ub3AsIDEwKSArIHBhcnNlSW50KG1hcmdpbkJvdHRvbSwgMTApOwogIHJldHVybiB7CiAgICBsZWZ0OiBib3VuZGluZ1JlY3QubGVmdCAtIGJhc2VSZWN0LmxlZnQsCiAgICB0b3A6IGJvdW5kaW5nUmVjdC50b3AgLSBiYXNlUmVjdC50b3AsCiAgICB3aWR0aDogYm91bmRpbmdSZWN0LnJpZ2h0IC0gYm91bmRpbmdSZWN0LmxlZnQsCiAgICBoZWlnaHQ6IGJvdW5kaW5nUmVjdC5ib3R0b20gLSBib3VuZGluZ1JlY3QudG9wLAogICAgd2lkdGhNOiBib3VuZGluZ1JlY3QucmlnaHQgLSBib3VuZGluZ1JlY3QubGVmdCArIChyZXNpemUgPT09IHRydWUgPyAwIDogbWFyZ2luSCksCiAgICBoZWlnaHRNOiBib3VuZGluZ1JlY3QuYm90dG9tIC0gYm91bmRpbmdSZWN0LnRvcCArIChyZXNpemUgPT09IHRydWUgPyAwIDogbWFyZ2luViksCiAgICBtYXJnaW5IOiByZXNpemUgPT09IHRydWUgPyBtYXJnaW5IIDogMCwKICAgIG1hcmdpblY6IHJlc2l6ZSA9PT0gdHJ1ZSA/IG1hcmdpblYgOiAwCiAgfTsKfQoKZnVuY3Rpb24gZ2V0QWJzb2x1dGVTaXplKGVsKSB7CiAgcmV0dXJuIHsKICAgIHdpZHRoOiBlbC5zY3JvbGxXaWR0aCwKICAgIGhlaWdodDogZWwuc2Nyb2xsSGVpZ2h0CiAgfTsKfSAvLyBmaXJlZm94IHJ1bGV6CgoKdmFyIHN0eWxlRWRnZXMgPSBbJ1RvcCcsICdSaWdodCcsICdCb3R0b20nLCAnTGVmdCddOwp2YXIgc3R5bGVCb3JkZXJSYWRpdXNlcyA9IFsnYm9yZGVyVG9wTGVmdFJhZGl1cycsICdib3JkZXJUb3BSaWdodFJhZGl1cycsICdib3JkZXJCb3R0b21SaWdodFJhZGl1cycsICdib3JkZXJCb3R0b21MZWZ0UmFkaXVzJ107CnZhciByZVN0eWxlU2tpcEtleSA9IC8tYmxvY2t8LWlubGluZXxibG9jay18aW5saW5lLS87CnZhciByZVN0eWxlU2tpcFJ1bGUgPSAvKC1ibG9ja3wtaW5saW5lfGJsb2NrLXxpbmxpbmUtKS4qOi87CgpmdW5jdGlvbiBnZXRDb21wdXRlZFN0eWxlKGVsLCBwcm9wcykgewogIHZhciBzdHlsZSA9IHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKGVsKTsKICB2YXIgZml4ZWQgPSB7fTsKCiAgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgewogICAgdmFyIHByb3AgPSBwcm9wc1tpXTsKCiAgICBpZiAoc3R5bGVbcHJvcF0gPT09ICcnKSB7CiAgICAgIGlmIChwcm9wID09PSAnY3NzVGV4dCcpIHsKICAgICAgICB2YXIgc3R5bGVMZW4gPSBzdHlsZS5sZW5ndGg7CiAgICAgICAgdmFyIHZhbCA9ICcnOwoKICAgICAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgc3R5bGVMZW47IF9pKyspIHsKICAgICAgICAgIGlmIChyZVN0eWxlU2tpcEtleS50ZXN0KHN0eWxlW19pXSkgIT09IHRydWUpIHsKICAgICAgICAgICAgdmFsICs9IHN0eWxlW19pXSArICc6ICcgKyBzdHlsZVtzdHlsZVtfaV1dICsgJzsgJzsKICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIGZpeGVkW3Byb3BdID0gdmFsOwogICAgICB9IGVsc2UgaWYgKFsnYm9yZGVyV2lkdGgnLCAnYm9yZGVyU3R5bGUnLCAnYm9yZGVyQ29sb3InXS5pbmRleE9mKHByb3ApID4gLTEpIHsKICAgICAgICB2YXIgc3VmZml4ID0gcHJvcC5yZXBsYWNlKCdib3JkZXInLCAnJyk7CiAgICAgICAgdmFyIF92YWwgPSAnJzsKCiAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBzdHlsZUVkZ2VzLmxlbmd0aDsgaisrKSB7CiAgICAgICAgICB2YXIgc3ViUHJvcCA9ICdib3JkZXInICsgc3R5bGVFZGdlc1tqXSArIHN1ZmZpeDsKICAgICAgICAgIF92YWwgKz0gc3R5bGVbc3ViUHJvcF0gKyAnICc7CiAgICAgICAgfQoKICAgICAgICBmaXhlZFtwcm9wXSA9IF92YWw7CiAgICAgIH0gZWxzZSBpZiAocHJvcCA9PT0gJ2JvcmRlclJhZGl1cycpIHsKICAgICAgICB2YXIgdmFsMSA9ICcnOwogICAgICAgIHZhciB2YWwyID0gJyc7CgogICAgICAgIGZvciAodmFyIF9qID0gMDsgX2ogPCBzdHlsZUJvcmRlclJhZGl1c2VzLmxlbmd0aDsgX2orKykgewogICAgICAgICAgdmFyIF92YWwyID0gc3R5bGVbc3R5bGVCb3JkZXJSYWRpdXNlc1tfal1dLnNwbGl0KCcgJyk7CgogICAgICAgICAgdmFsMSArPSBfdmFsMlswXSArICcgJzsKICAgICAgICAgIHZhbDIgKz0gKF92YWwyWzFdID09PSB2b2lkIDAgPyBfdmFsMlswXSA6IF92YWwyWzFdKSArICcgJzsKICAgICAgICB9CgogICAgICAgIGZpeGVkW3Byb3BdID0gdmFsMSArICcvICcgKyB2YWwyOwogICAgICB9IGVsc2UgewogICAgICAgIGZpeGVkW3Byb3BdID0gc3R5bGVbcHJvcF07CiAgICAgIH0KICAgIH0gZWxzZSB7CiAgICAgIGlmIChwcm9wID09PSAnY3NzVGV4dCcpIHsKICAgICAgICBmaXhlZFtwcm9wXSA9IHN0eWxlW3Byb3BdLnNwbGl0KCc7JykuZmlsdGVyKGZ1bmN0aW9uICh2YWwpIHsKICAgICAgICAgIHJldHVybiByZVN0eWxlU2tpcFJ1bGUudGVzdCh2YWwpICE9PSB0cnVlOwogICAgICAgIH0pLmpvaW4oJzsnKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBmaXhlZFtwcm9wXSA9IHN0eWxlW3Byb3BdOwogICAgICB9CiAgICB9CiAgfQoKICByZXR1cm4gZml4ZWQ7Cn0KCnZhciB6SW5kZXhQb3NpdGlvbnMgPSBbJ2Fic29sdXRlJywgJ2ZpeGVkJywgJ3JlbGF0aXZlJywgJ3N0aWNreSddOwoKZnVuY3Rpb24gZ2V0TWF4WkluZGV4KGVsU3RhcnQpIHsKICB2YXIgZWwgPSBlbFN0YXJ0OwogIHZhciBtYXhJbmRleCA9IDA7CgogIHdoaWxlIChlbCAhPT0gbnVsbCAmJiBlbCAhPT0gZG9jdW1lbnQpIHsKICAgIHZhciBfd2luZG93JGdldENvbXB1dGVkU3QyID0gd2luZG93LmdldENvbXB1dGVkU3R5bGUoZWwpLAogICAgICAgIHBvc2l0aW9uID0gX3dpbmRvdyRnZXRDb21wdXRlZFN0Mi5wb3NpdGlvbiwKICAgICAgICB6SW5kZXggPSBfd2luZG93JGdldENvbXB1dGVkU3QyLnpJbmRleDsKCiAgICB2YXIgekluZGV4TnVtID0gTnVtYmVyKHpJbmRleCk7CgogICAgaWYgKHpJbmRleE51bSA+IG1heEluZGV4ICYmIChlbCA9PT0gZWxTdGFydCB8fCB6SW5kZXhQb3NpdGlvbnMuaW5jbHVkZXMocG9zaXRpb24pID09PSB0cnVlKSkgewogICAgICBtYXhJbmRleCA9IHpJbmRleE51bTsKICAgIH0KCiAgICBlbCA9IGVsLnBhcmVudE5vZGU7CiAgfQoKICByZXR1cm4gbWF4SW5kZXg7Cn0KCmZ1bmN0aW9uIG5vcm1hbGl6ZUVsZW1lbnRzKG9wdHMpIHsKICByZXR1cm4gewogICAgZnJvbTogb3B0cy5mcm9tLAogICAgdG86IG9wdHMudG8gIT09IHZvaWQgMCA/IG9wdHMudG8gOiBvcHRzLmZyb20KICB9Owp9CgpmdW5jdGlvbiBub3JtYWxpemVPcHRpb25zKG9wdGlvbnMpIHsKICBpZiAodHlwZW9mIG9wdGlvbnMgPT09ICdudW1iZXInKSB7CiAgICBvcHRpb25zID0gewogICAgICBkdXJhdGlvbjogb3B0aW9ucwogICAgfTsKICB9IGVsc2UgaWYgKHR5cGVvZiBvcHRpb25zID09PSAnZnVuY3Rpb24nKSB7CiAgICBvcHRpb25zID0gewogICAgICBvbkVuZDogb3B0aW9ucwogICAgfTsKICB9CgogIHJldHVybiBfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIG9wdGlvbnMpLCB7fSwgewogICAgd2FpdEZvcjogb3B0aW9ucy53YWl0Rm9yID09PSB2b2lkIDAgPyAwIDogb3B0aW9ucy53YWl0Rm9yLAogICAgZHVyYXRpb246IGlzTmFOKG9wdGlvbnMuZHVyYXRpb24pID09PSB0cnVlID8gMzAwIDogcGFyc2VJbnQob3B0aW9ucy5kdXJhdGlvbiwgMTApLAogICAgZWFzaW5nOiB0eXBlb2Ygb3B0aW9ucy5lYXNpbmcgPT09ICdzdHJpbmcnICYmIG9wdGlvbnMuZWFzaW5nLmxlbmd0aCA+IDAgPyBvcHRpb25zLmVhc2luZyA6ICdlYXNlLWluLW91dCcsCiAgICBkZWxheTogaXNOYU4ob3B0aW9ucy5kZWxheSkgPT09IHRydWUgPyAwIDogcGFyc2VJbnQob3B0aW9ucy5kZWxheSwgMTApLAogICAgZmlsbDogdHlwZW9mIG9wdGlvbnMuZmlsbCA9PT0gJ3N0cmluZycgJiYgb3B0aW9ucy5maWxsLmxlbmd0aCA+IDAgPyBvcHRpb25zLmZpbGwgOiAnbm9uZScsCiAgICByZXNpemU6IG9wdGlvbnMucmVzaXplID09PSB0cnVlLAogICAgdXNlQ1NTOiBvcHRpb25zLnVzZUNTUyA9PT0gdHJ1ZSwKICAgIGhpZGVGcm9tQ2xvbmU6IG9wdGlvbnMuaGlkZUZyb21DbG9uZSA9PT0gdHJ1ZSwKICAgIGtlZXBUb0Nsb25lOiBvcHRpb25zLmtlZXBUb0Nsb25lID09PSB0cnVlLAogICAgdHdlZW46IG9wdGlvbnMudHdlZW4gPT09IHRydWUsCiAgICB0d2VlbkZyb21PcGFjaXR5OiBpc05hTihvcHRpb25zLnR3ZWVuRnJvbU9wYWNpdHkpID09PSB0cnVlID8gMC42IDogcGFyc2VGbG9hdChvcHRpb25zLnR3ZWVuRnJvbU9wYWNpdHkpLAogICAgdHdlZW5Ub09wYWNpdHk6IGlzTmFOKG9wdGlvbnMudHdlZW5Ub09wYWNpdHkpID09PSB0cnVlID8gMC41IDogcGFyc2VGbG9hdChvcHRpb25zLnR3ZWVuVG9PcGFjaXR5KQogIH0pOwp9CgpmdW5jdGlvbiBnZXRFbGVtZW50KGVsZW1lbnQpIHsKICB2YXIgdHlwZSA9IF90eXBlb2YoZWxlbWVudCk7CgogIHJldHVybiB0eXBlID09PSAnZnVuY3Rpb24nID8gZWxlbWVudCgpIDogdHlwZSA9PT0gJ3N0cmluZycgPyBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGVsZW1lbnQpIDogZWxlbWVudDsKfQoKZnVuY3Rpb24gaXNWYWxpZEVsZW1lbnQoZWxlbWVudCkgewogIHJldHVybiBlbGVtZW50ICYmIGVsZW1lbnQub3duZXJEb2N1bWVudCA9PT0gZG9jdW1lbnQgJiYgZWxlbWVudC5wYXJlbnROb2RlICE9PSBudWxsOwp9CgpleHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBtb3JwaChfb3B0aW9ucykgewogIHZhciBjYW5jZWwgPSBmdW5jdGlvbiBjYW5jZWwoKSB7CiAgICByZXR1cm4gZmFsc2U7CiAgfTsKCiAgdmFyIGNhbmNlbFN0YXR1cyA9IGZhbHNlOwogIHZhciBlbmRFbGVtZW50VG8gPSB0cnVlOwogIHZhciBlbGVtZW50cyA9IG5vcm1hbGl6ZUVsZW1lbnRzKF9vcHRpb25zKTsKICB2YXIgb3B0aW9ucyA9IG5vcm1hbGl6ZU9wdGlvbnMoX29wdGlvbnMpOwogIHZhciBlbEZyb20gPSBnZXRFbGVtZW50KGVsZW1lbnRzLmZyb20pOwoKICBpZiAoaXNWYWxpZEVsZW1lbnQoZWxGcm9tKSAhPT0gdHJ1ZSkgewogICAgLy8gd2UgcmV0dXJuIGEgY2FuY2VsIGZ1bmN0aW9uIHRoYXQgcmV0dXJuIGZhbHNlLCBtZWFuaW5nIHRoZSBjYW5jZWwgZnVuY3Rpb24gZmFpbGVkCiAgICByZXR1cm4gY2FuY2VsOwogIH0gLy8gd2UgY2xlYW4gb3RoZXIgbW9ycGhzIHJ1bm5pbmcgb24gdGhpcyBlbGVtZW50CgoKICB0eXBlb2YgZWxGcm9tLnFNb3JwaENhbmNlbCA9PT0gJ2Z1bmN0aW9uJyAmJiBlbEZyb20ucU1vcnBoQ2FuY2VsKCk7CiAgdmFyIGFuaW1hdGlvbkZyb21DbG9uZSA9IHZvaWQgMDsKICB2YXIgYW5pbWF0aW9uRnJvbVR3ZWVuID0gdm9pZCAwOwogIHZhciBhbmltYXRpb25Ub0Nsb25lID0gdm9pZCAwOwogIHZhciBhbmltYXRpb25UbyA9IHZvaWQgMDsKICB2YXIgZWxGcm9tUGFyZW50ID0gZWxGcm9tLnBhcmVudE5vZGU7CiAgdmFyIGVsRnJvbU5leHQgPSBlbEZyb20ubmV4dEVsZW1lbnRTaWJsaW5nOyAvLyB3ZSBnZXQgdGhlIGRpbWVuc2lvbnMgYW5kIGNoYXJhY3RlcmlzdGljcwogIC8vIG9mIHRoZSBwYXJlbnQgb2YgdGhlIGluaXRpYWwgZWxlbWVudCBiZWZvcmUgY2hhbmdlcwoKICB2YXIgZWxGcm9tUG9zaXRpb24gPSBnZXRBYnNvbHV0ZVBvc2l0aW9uKGVsRnJvbSwgb3B0aW9ucy5yZXNpemUpOwoKICB2YXIgX2dldEFic29sdXRlU2l6ZSA9IGdldEFic29sdXRlU2l6ZShlbEZyb21QYXJlbnQpLAogICAgICBlbEZyb21QYXJlbnRXaWR0aEJlZm9yZSA9IF9nZXRBYnNvbHV0ZVNpemUud2lkdGgsCiAgICAgIGVsRnJvbVBhcmVudEhlaWdodEJlZm9yZSA9IF9nZXRBYnNvbHV0ZVNpemUuaGVpZ2h0OwoKICB2YXIgX2dldENvbXB1dGVkU3R5bGUgPSBnZXRDb21wdXRlZFN0eWxlKGVsRnJvbSwgWydib3JkZXJXaWR0aCcsICdib3JkZXJTdHlsZScsICdib3JkZXJDb2xvcicsICdib3JkZXJSYWRpdXMnLCAnYmFja2dyb3VuZENvbG9yJywgJ3RyYW5zZm9ybScsICdwb3NpdGlvbicsICdjc3NUZXh0J10pLAogICAgICBlbEZyb21Cb3JkZXJXaWR0aCA9IF9nZXRDb21wdXRlZFN0eWxlLmJvcmRlcldpZHRoLAogICAgICBlbEZyb21Cb3JkZXJTdHlsZSA9IF9nZXRDb21wdXRlZFN0eWxlLmJvcmRlclN0eWxlLAogICAgICBlbEZyb21Cb3JkZXJDb2xvciA9IF9nZXRDb21wdXRlZFN0eWxlLmJvcmRlckNvbG9yLAogICAgICBlbEZyb21Cb3JkZXJSYWRpdXMgPSBfZ2V0Q29tcHV0ZWRTdHlsZS5ib3JkZXJSYWRpdXMsCiAgICAgIGVsRnJvbUJhY2tncm91bmQgPSBfZ2V0Q29tcHV0ZWRTdHlsZS5iYWNrZ3JvdW5kQ29sb3IsCiAgICAgIGVsRnJvbVRyYW5zZm9ybSA9IF9nZXRDb21wdXRlZFN0eWxlLnRyYW5zZm9ybSwKICAgICAgZWxGcm9tUG9zaXRpb25pbmdUeXBlID0gX2dldENvbXB1dGVkU3R5bGUucG9zaXRpb24sCiAgICAgIGVsRnJvbUNzc1RleHQgPSBfZ2V0Q29tcHV0ZWRTdHlsZS5jc3NUZXh0OwoKICB2YXIgZWxGcm9tQ2xhc3NTYXZlZCA9IGVsRnJvbS5jbGFzc0xpc3QudG9TdHJpbmcoKTsKICB2YXIgZWxGcm9tU3R5bGVTYXZlZCA9IGVsRnJvbS5zdHlsZS5jc3NUZXh0OyAvLyB3ZSBtYWtlIGEgY2xvbmUgb2YgdGhlIGluaXRpYWwgZWxlbWVudCBhbmQKICAvLyB1c2UgaXQgdG8gZGlzcGxheSB1bnRpbCB0aGUgZmluYWwgZWxlbWVudCBpcyByZWFkeQogIC8vIGFuZCB0byBjaGFuZ2UgdGhlIG9jY3VwaWVkIHNwYWNlIGR1cmluZyBhbmltYXRpb24KCiAgdmFyIGVsRnJvbUNsb25lID0gZWxGcm9tLmNsb25lTm9kZSh0cnVlKTsKICB2YXIgZWxGcm9tVHdlZW4gPSBvcHRpb25zLnR3ZWVuID09PSB0cnVlID8gZWxGcm9tLmNsb25lTm9kZSh0cnVlKSA6IHZvaWQgMDsKCiAgaWYgKGVsRnJvbVR3ZWVuICE9PSB2b2lkIDApIHsKICAgIGVsRnJvbVR3ZWVuLmNsYXNzTmFtZSA9IGVsRnJvbVR3ZWVuLmNsYXNzTGlzdC50b1N0cmluZygpLnNwbGl0KCcgJykuZmlsdGVyKGZ1bmN0aW9uIChjKSB7CiAgICAgIHJldHVybiAvXmJnLS8udGVzdChjKSA9PT0gZmFsc2U7CiAgICB9KS5qb2luKCcgJyk7CiAgfSAvLyBpZiB0aGUgaW5pdGlhbCBlbGVtZW50IGlzIG5vdCBnb2luZyB0byBiZSByZW1vdmVkIGRvIG5vdCBzaG93IHRoZSBwbGFjZWhvbGRlcgoKCiAgb3B0aW9ucy5oaWRlRnJvbUNsb25lID09PSB0cnVlICYmIGVsRnJvbUNsb25lLmNsYXNzTGlzdC5hZGQoJ3EtbW9ycGgtLWludGVybmFsJyk7IC8vIHByZXZlbnQgaW50ZXJhY3Rpb24gd2l0aCBwbGFjZWhvbGRlcgoKICBlbEZyb21DbG9uZS5zZXRBdHRyaWJ1dGUoJ2FyaWEtaGlkZGVuJywgJ3RydWUnKTsKICBlbEZyb21DbG9uZS5zdHlsZS50cmFuc2l0aW9uID0gJ25vbmUnOwogIGVsRnJvbUNsb25lLnN0eWxlLmFuaW1hdGlvbiA9ICdub25lJzsKICBlbEZyb21DbG9uZS5zdHlsZS5wb2ludGVyRXZlbnRzID0gJ25vbmUnOwogIGVsRnJvbVBhcmVudC5pbnNlcnRCZWZvcmUoZWxGcm9tQ2xvbmUsIGVsRnJvbU5leHQpOyAvLyB3ZSBtYXJrIHRoZSBlbGVtZW50IHdpdGggaXRzIGNsZWFudXAgZnVuY3Rpb24KCiAgZWxGcm9tLnFNb3JwaENhbmNlbCA9IGZ1bmN0aW9uICgpIHsKICAgIGNhbmNlbFN0YXR1cyA9IHRydWU7IC8vIHdlIGNsZWFuIHRoZSBjbG9uZSBvZiB0aGUgaW5pdGlhbCBlbGVtZW50CgogICAgZWxGcm9tQ2xvbmUucmVtb3ZlKCk7CiAgICBlbEZyb21Ud2VlbiAhPT0gdm9pZCAwICYmIGVsRnJvbVR3ZWVuLnJlbW92ZSgpOwogICAgb3B0aW9ucy5oaWRlRnJvbUNsb25lID09PSB0cnVlICYmIGVsRnJvbUNsb25lLmNsYXNzTGlzdC5yZW1vdmUoJ3EtbW9ycGgtLWludGVybmFsJyk7IC8vIHdlIHJlbW92ZSB0aGUgY2xlYW51cCBmdW5jdGlvbiBmcm9tIHRoZSBlbGVtZW50CgogICAgZWxGcm9tLnFNb3JwaENhbmNlbCA9IHZvaWQgMDsKICB9OyAvLyB3aWxsIGJlIGNhbGxlZCBhZnRlciBWdWUgY2F0Y2hlcyB1cCB3aXRoIHRoZSBjaGFuZ2VzIGRvbmUgYnkgX29wdGlvbnMub25Ub2dnbGUoKSBmdW5jdGlvbgoKCiAgdmFyIGNhbGN1bGF0ZUZpbmFsU3RhdGUgPSBmdW5jdGlvbiBjYWxjdWxhdGVGaW5hbFN0YXRlKCkgewogICAgdmFyIGVsVG8gPSBnZXRFbGVtZW50KGVsZW1lbnRzLnRvKTsKCiAgICBpZiAoY2FuY2VsU3RhdHVzID09PSB0cnVlIHx8IGlzVmFsaWRFbGVtZW50KGVsVG8pICE9PSB0cnVlKSB7CiAgICAgIHR5cGVvZiBlbEZyb20ucU1vcnBoQ2FuY2VsID09PSAnZnVuY3Rpb24nICYmIGVsRnJvbS5xTW9ycGhDYW5jZWwoKTsKICAgICAgcmV0dXJuOwogICAgfSAvLyB3ZSBjbGVhbiBvdGhlciBtb3JwaHMgcnVubmluZyBvbiB0aGlzIGVsZW1lbnQKCgogICAgZWxGcm9tICE9PSBlbFRvICYmIHR5cGVvZiBlbFRvLnFNb3JwaENhbmNlbCA9PT0gJ2Z1bmN0aW9uJyAmJiBlbFRvLnFNb3JwaENhbmNlbCgpOyAvLyB3ZSBoaWRlIHRoZSBmaW5hbCBlbGVtZW50IGFuZCB0aGUgY2xvbmUgb2YgdGhlIGluaXRpYWwgZWxlbWVudAogICAgLy8gd2UgZG9uJ3QgaGlkZSB0aGUgZmluYWwgZWxlbWVudCBpZiB3ZSB3YW50IGJvdGggaXQgYW5kIHRoZSBhbmltYXRlZCBvbmUgdmlzaWJsZQoKICAgIG9wdGlvbnMua2VlcFRvQ2xvbmUgIT09IHRydWUgJiYgZWxUby5jbGFzc0xpc3QuYWRkKCdxLW1vcnBoLS1pbnRlcm5hbCcpOwogICAgZWxGcm9tQ2xvbmUuY2xhc3NMaXN0LmFkZCgncS1tb3JwaC0taW50ZXJuYWwnKTsgLy8gd2UgZ2V0IHRoZSBkaW1lbnNpb25zIG9mIHRoZSBwYXJlbnQgb2YgdGhlIGluaXRpYWwgZWxlbWVudCBhZnRlciBjaGFuZ2VzCiAgICAvLyB0aGUgZGlmZmVyZW5jZSBpcyBob3cgbXVjaCB3ZSBzaG91bGQgYW5pbWF0ZSB0aGUgY2xvbmUKCiAgICB2YXIgX2dldEFic29sdXRlU2l6ZTIgPSBnZXRBYnNvbHV0ZVNpemUoZWxGcm9tUGFyZW50KSwKICAgICAgICBlbEZyb21QYXJlbnRXaWR0aEFmdGVyID0gX2dldEFic29sdXRlU2l6ZTIud2lkdGgsCiAgICAgICAgZWxGcm9tUGFyZW50SGVpZ2h0QWZ0ZXIgPSBfZ2V0QWJzb2x1dGVTaXplMi5oZWlnaHQ7IC8vIHdlIGdldCB0aGUgZGltZW5zaW9ucyBvZiB0aGUgcGFyZW50IG9mIHRoZSBmaW5hbCBlbGVtZW50IGJlZm9yZSBjaGFuZ2VzCgoKICAgIHZhciBfZ2V0QWJzb2x1dGVTaXplMyA9IGdldEFic29sdXRlU2l6ZShlbFRvLnBhcmVudE5vZGUpLAogICAgICAgIGVsVG9QYXJlbnRXaWR0aEJlZm9yZSA9IF9nZXRBYnNvbHV0ZVNpemUzLndpZHRoLAogICAgICAgIGVsVG9QYXJlbnRIZWlnaHRCZWZvcmUgPSBfZ2V0QWJzb2x1dGVTaXplMy5oZWlnaHQ7IC8vIHRoZW4gd2Ugc2hvdyB0aGUgY2xvbmUgb2YgdGhlIGluaXRpYWwgZWxlbWVudCBpZiB3ZSBkb24ndCB3YW50IGl0IGhpZGRlbgoKCiAgICBvcHRpb25zLmhpZGVGcm9tQ2xvbmUgIT09IHRydWUgJiYgZWxGcm9tQ2xvbmUuY2xhc3NMaXN0LnJlbW92ZSgncS1tb3JwaC0taW50ZXJuYWwnKTsgLy8gd2UgbWFyayB0aGUgZWxlbWVudCB3aXRoIGl0cyBjbGVhbnVwIGZ1bmN0aW9uCgogICAgZWxUby5xTW9ycGhDYW5jZWwgPSBmdW5jdGlvbiAoKSB7CiAgICAgIGNhbmNlbFN0YXR1cyA9IHRydWU7IC8vIHdlIGNsZWFuIHRoZSBjbG9uZSBvZiB0aGUgaW5pdGlhbCBlbGVtZW50CgogICAgICBlbEZyb21DbG9uZS5yZW1vdmUoKTsKICAgICAgZWxGcm9tVHdlZW4gIT09IHZvaWQgMCAmJiBlbEZyb21Ud2Vlbi5yZW1vdmUoKTsKICAgICAgb3B0aW9ucy5oaWRlRnJvbUNsb25lID09PSB0cnVlICYmIGVsRnJvbUNsb25lLmNsYXNzTGlzdC5yZW1vdmUoJ3EtbW9ycGgtLWludGVybmFsJyk7IC8vIHdlIHNob3cgdGhlIGZpbmFsIGVsZW1lbnQKCiAgICAgIG9wdGlvbnMua2VlcFRvQ2xvbmUgIT09IHRydWUgJiYgZWxUby5jbGFzc0xpc3QucmVtb3ZlKCdxLW1vcnBoLS1pbnRlcm5hbCcpOyAvLyB3ZSByZW1vdmUgdGhlIGNsZWFudXAgZnVuY3Rpb24gZnJvbSB0aGUgZWxlbWVudHMKCiAgICAgIGVsRnJvbS5xTW9ycGhDYW5jZWwgPSB2b2lkIDA7CiAgICAgIGVsVG8ucU1vcnBoQ2FuY2VsID0gdm9pZCAwOwogICAgfTsgLy8gd2lsbCBiZSBjYWxsZWQgYWZ0ZXIgd2FpdEZvciAoZ2l2ZSB0aW1lIHRvIHJlbmRlciB0aGUgZmluYWwgZWxlbWVudCkKCgogICAgdmFyIGFuaW1hdGUgPSBmdW5jdGlvbiBhbmltYXRlKCkgewogICAgICBpZiAoY2FuY2VsU3RhdHVzID09PSB0cnVlKSB7CiAgICAgICAgdHlwZW9mIGVsVG8ucU1vcnBoQ2FuY2VsID09PSAnZnVuY3Rpb24nICYmIGVsVG8ucU1vcnBoQ2FuY2VsKCk7CiAgICAgICAgcmV0dXJuOwogICAgICB9IC8vIG5vdyB0aGUgYW5pbWF0aW9uIHN0YXJ0cywgc28gd2Ugb25seSBuZWVkIHRoZSBjbG9uZQogICAgICAvLyBvZiB0aGUgaW5pdGlhbCBlbGVtZW50IGFzIGEgc3BhY2VyCiAgICAgIC8vIHdlIGFsc28gaGlkZSBpdCB0byBjYWxjdWxhdGUgdGhlIGRpbWVuc2lvbnMgb2YgdGhlCiAgICAgIC8vIHBhcmVudCBvZiB0aGUgZmluYWwgZWxlbWVudCBhZnRlciB0aGUgY2hhbmdlcwoKCiAgICAgIGlmIChvcHRpb25zLmhpZGVGcm9tQ2xvbmUgIT09IHRydWUpIHsKICAgICAgICBlbEZyb21DbG9uZS5jbGFzc0xpc3QuYWRkKCdxLW1vcnBoLS1pbnRlcm5hbCcpOwogICAgICAgIGVsRnJvbUNsb25lLmlubmVySFRNTCA9ICcnOwogICAgICAgIGVsRnJvbUNsb25lLnN0eWxlLmxlZnQgPSAwOwogICAgICAgIGVsRnJvbUNsb25lLnN0eWxlLnJpZ2h0ID0gJ3Vuc2V0JzsKICAgICAgICBlbEZyb21DbG9uZS5zdHlsZS50b3AgPSAwOwogICAgICAgIGVsRnJvbUNsb25lLnN0eWxlLmJvdHRvbSA9ICd1bnNldCc7CiAgICAgICAgZWxGcm9tQ2xvbmUuc3R5bGUudHJhbnNmb3JtID0gJ25vbmUnOwogICAgICB9IC8vIHdlIHNob3cgdGhlIGZpbmFsIGVsZW1lbnQKCgogICAgICBpZiAob3B0aW9ucy5rZWVwVG9DbG9uZSAhPT0gdHJ1ZSkgewogICAgICAgIGVsVG8uY2xhc3NMaXN0LnJlbW92ZSgncS1tb3JwaC0taW50ZXJuYWwnKTsKICAgICAgfSAvLyB3ZSBnZXQgdGhlIGRpbWVuc2lvbnMgb2YgdGhlIHBhcmVudCBvZiB0aGUgZmluYWwgZWxlbWVudCBhZnRlciBjaGFuZ2VzCiAgICAgIC8vIHRoZSBkaWZmZXJlbmNlIGlzIGhvdyBtdWNoIHdlIHNob3VsZCBhbmltYXRlIHRoZSBjbG9uZQoKCiAgICAgIHZhciBlbFRvUGFyZW50ID0gZWxUby5wYXJlbnROb2RlOwoKICAgICAgdmFyIF9nZXRBYnNvbHV0ZVNpemU0ID0gZ2V0QWJzb2x1dGVTaXplKGVsVG9QYXJlbnQpLAogICAgICAgICAgZWxUb1BhcmVudFdpZHRoQWZ0ZXIgPSBfZ2V0QWJzb2x1dGVTaXplNC53aWR0aCwKICAgICAgICAgIGVsVG9QYXJlbnRIZWlnaHRBZnRlciA9IF9nZXRBYnNvbHV0ZVNpemU0LmhlaWdodDsKCiAgICAgIHZhciBlbFRvQ2xvbmUgPSBlbFRvLmNsb25lTm9kZShvcHRpb25zLmtlZXBUb0Nsb25lKTsKICAgICAgZWxUb0Nsb25lLnNldEF0dHJpYnV0ZSgnYXJpYS1oaWRkZW4nLCAndHJ1ZScpOwoKICAgICAgaWYgKG9wdGlvbnMua2VlcFRvQ2xvbmUgIT09IHRydWUpIHsKICAgICAgICBlbFRvQ2xvbmUuc3R5bGUubGVmdCA9IDA7CiAgICAgICAgZWxUb0Nsb25lLnN0eWxlLnJpZ2h0ID0gJ3Vuc2V0JzsKICAgICAgICBlbFRvQ2xvbmUuc3R5bGUudG9wID0gMDsKICAgICAgICBlbFRvQ2xvbmUuc3R5bGUuYm90dG9tID0gJ3Vuc2V0JzsKICAgICAgICBlbFRvQ2xvbmUuc3R5bGUudHJhbnNmb3JtID0gJ25vbmUnOwogICAgICAgIGVsVG9DbG9uZS5zdHlsZS5wb2ludGVyRXZlbnRzID0gJ25vbmUnOwogICAgICB9CgogICAgICBlbFRvQ2xvbmUuY2xhc3NMaXN0LmFkZCgncS1tb3JwaC0taW50ZXJuYWwnKTsgLy8gaWYgZWxGcm9tIGlzIHRoZSBzYW1lIGFzIGVsVG8gdGhlIG5leHQgZWxlbWVudCBpcyBlbEZyb21DbG9uZQoKICAgICAgdmFyIGVsVG9OZXh0ID0gZWxUbyA9PT0gZWxGcm9tICYmIGVsRnJvbVBhcmVudCA9PT0gZWxUb1BhcmVudCA/IGVsRnJvbUNsb25lIDogZWxUby5uZXh0RWxlbWVudFNpYmxpbmc7CiAgICAgIGVsVG9QYXJlbnQuaW5zZXJ0QmVmb3JlKGVsVG9DbG9uZSwgZWxUb05leHQpOwoKICAgICAgdmFyIF9nZXRDb21wdXRlZFN0eWxlMiA9IGdldENvbXB1dGVkU3R5bGUoZWxUbywgWydib3JkZXJXaWR0aCcsICdib3JkZXJTdHlsZScsICdib3JkZXJDb2xvcicsICdib3JkZXJSYWRpdXMnLCAnYmFja2dyb3VuZENvbG9yJywgJ3RyYW5zZm9ybScsICdwb3NpdGlvbicsICdjc3NUZXh0J10pLAogICAgICAgICAgZWxUb0JvcmRlcldpZHRoID0gX2dldENvbXB1dGVkU3R5bGUyLmJvcmRlcldpZHRoLAogICAgICAgICAgZWxUb0JvcmRlclN0eWxlID0gX2dldENvbXB1dGVkU3R5bGUyLmJvcmRlclN0eWxlLAogICAgICAgICAgZWxUb0JvcmRlckNvbG9yID0gX2dldENvbXB1dGVkU3R5bGUyLmJvcmRlckNvbG9yLAogICAgICAgICAgZWxUb0JvcmRlclJhZGl1cyA9IF9nZXRDb21wdXRlZFN0eWxlMi5ib3JkZXJSYWRpdXMsCiAgICAgICAgICBlbFRvQmFja2dyb3VuZCA9IF9nZXRDb21wdXRlZFN0eWxlMi5iYWNrZ3JvdW5kQ29sb3IsCiAgICAgICAgICBlbFRvVHJhbnNmb3JtID0gX2dldENvbXB1dGVkU3R5bGUyLnRyYW5zZm9ybSwKICAgICAgICAgIGVsVG9Qb3NpdGlvbmluZ1R5cGUgPSBfZ2V0Q29tcHV0ZWRTdHlsZTIucG9zaXRpb24sCiAgICAgICAgICBlbFRvQ3NzVGV4dCA9IF9nZXRDb21wdXRlZFN0eWxlMi5jc3NUZXh0OwoKICAgICAgdmFyIGVsVG9DbGFzc1NhdmVkID0gZWxUby5jbGFzc0xpc3QudG9TdHJpbmcoKTsKICAgICAgdmFyIGVsVG9TdHlsZVNhdmVkID0gZWxUby5zdHlsZS5jc3NUZXh0OyAvLyB3ZSBzZXQgdGhlIGNvbXB1dGVkIHN0eWxlcyBvbiB0aGUgZWxlbWVudCAodG8gYmUgYWJsZSB0byByZW1vdmUgY2xhc3NlcykKCiAgICAgIGVsVG8uc3R5bGUuY3NzVGV4dCA9IGVsVG9Dc3NUZXh0OwogICAgICBlbFRvLnN0eWxlLnRyYW5zZm9ybSA9ICdub25lJzsKICAgICAgZWxUby5zdHlsZS5hbmltYXRpb24gPSAnbm9uZSc7CiAgICAgIGVsVG8uc3R5bGUudHJhbnNpdGlvbiA9ICdub25lJzsgLy8gd2Ugc3RyaXAgdGhlIGJhY2tncm91bmQgY2xhc3NlcyAoYmFja2dyb3VuZCBjb2xvciBjYW4gbm8gbG9uZ2VyIGJlIGFuaW1hdGVkIGlmICFpbXBvcnRhbnQgaXMgdXNlZCkKCiAgICAgIGVsVG8uY2xhc3NOYW1lID0gZWxUb0NsYXNzU2F2ZWQuc3BsaXQoJyAnKS5maWx0ZXIoZnVuY3Rpb24gKGMpIHsKICAgICAgICByZXR1cm4gL15iZy0vLnRlc3QoYykgPT09IGZhbHNlOwogICAgICB9KS5qb2luKCcgJyk7CiAgICAgIHZhciBlbFRvUG9zaXRpb24gPSBnZXRBYnNvbHV0ZVBvc2l0aW9uKGVsVG8sIG9wdGlvbnMucmVzaXplKTsKICAgICAgdmFyIGRlbHRhWCA9IGVsRnJvbVBvc2l0aW9uLmxlZnQgLSBlbFRvUG9zaXRpb24ubGVmdDsKICAgICAgdmFyIGRlbHRhWSA9IGVsRnJvbVBvc2l0aW9uLnRvcCAtIGVsVG9Qb3NpdGlvbi50b3A7CiAgICAgIHZhciBzY2FsZVggPSBlbEZyb21Qb3NpdGlvbi53aWR0aCAvIChlbFRvUG9zaXRpb24ud2lkdGggPiAwID8gZWxUb1Bvc2l0aW9uLndpZHRoIDogMTApOwogICAgICB2YXIgc2NhbGVZID0gZWxGcm9tUG9zaXRpb24uaGVpZ2h0IC8gKGVsVG9Qb3NpdGlvbi5oZWlnaHQgPiAwID8gZWxUb1Bvc2l0aW9uLmhlaWdodCA6IDEwMCk7CiAgICAgIHZhciBlbEZyb21QYXJlbnRXaWR0aERpZmYgPSBlbEZyb21QYXJlbnRXaWR0aEJlZm9yZSAtIGVsRnJvbVBhcmVudFdpZHRoQWZ0ZXI7CiAgICAgIHZhciBlbEZyb21QYXJlbnRIZWlnaHREaWZmID0gZWxGcm9tUGFyZW50SGVpZ2h0QmVmb3JlIC0gZWxGcm9tUGFyZW50SGVpZ2h0QWZ0ZXI7CiAgICAgIHZhciBlbFRvUGFyZW50V2lkdGhEaWZmID0gZWxUb1BhcmVudFdpZHRoQWZ0ZXIgLSBlbFRvUGFyZW50V2lkdGhCZWZvcmU7CiAgICAgIHZhciBlbFRvUGFyZW50SGVpZ2h0RGlmZiA9IGVsVG9QYXJlbnRIZWlnaHRBZnRlciAtIGVsVG9QYXJlbnRIZWlnaHRCZWZvcmU7CiAgICAgIHZhciBlbEZyb21DbG9uZVdpZHRoID0gTWF0aC5tYXgoZWxGcm9tUG9zaXRpb24ud2lkdGhNLCBlbEZyb21QYXJlbnRXaWR0aERpZmYpOwogICAgICB2YXIgZWxGcm9tQ2xvbmVIZWlnaHQgPSBNYXRoLm1heChlbEZyb21Qb3NpdGlvbi5oZWlnaHRNLCBlbEZyb21QYXJlbnRIZWlnaHREaWZmKTsKICAgICAgdmFyIGVsVG9DbG9uZVdpZHRoID0gTWF0aC5tYXgoZWxUb1Bvc2l0aW9uLndpZHRoTSwgZWxUb1BhcmVudFdpZHRoRGlmZik7CiAgICAgIHZhciBlbFRvQ2xvbmVIZWlnaHQgPSBNYXRoLm1heChlbFRvUG9zaXRpb24uaGVpZ2h0TSwgZWxUb1BhcmVudEhlaWdodERpZmYpOwogICAgICB2YXIgZWxTaGFyZWRTaXplID0gZWxGcm9tID09PSBlbFRvICYmIFsnYWJzb2x1dGUnLCAnZml4ZWQnXS5pbmNsdWRlcyhlbFRvUG9zaXRpb25pbmdUeXBlKSA9PT0gZmFsc2UgJiYgWydhYnNvbHV0ZScsICdmaXhlZCddLmluY2x1ZGVzKGVsRnJvbVBvc2l0aW9uaW5nVHlwZSkgPT09IGZhbHNlOyAvLyBpZiB0aGUgZmluYWwgZWxlbWVudCBoYXMgZml4ZWQgcG9zaXRpb24gb3IgaWYgYSBwYXJlbnQKICAgICAgLy8gaGFzIGZpeGVkIHBvc2l0aW9uIHdlIG5lZWQgdG8gYW5pbWF0ZSBpdCBhcyBmaXhlZAoKICAgICAgdmFyIGVsVG9OZWVkc0ZpeGVkUG9zaXRpb24gPSBlbFRvUG9zaXRpb25pbmdUeXBlID09PSAnZml4ZWQnOwogICAgICB2YXIgcGFyZW50ID0gZWxUb1BhcmVudDsKCiAgICAgIHdoaWxlIChlbFRvTmVlZHNGaXhlZFBvc2l0aW9uICE9PSB0cnVlICYmIHBhcmVudCAhPT0gZG9jdW1lbnQpIHsKICAgICAgICBlbFRvTmVlZHNGaXhlZFBvc2l0aW9uID0gd2luZG93LmdldENvbXB1dGVkU3R5bGUocGFyZW50KS5wb3NpdGlvbiA9PT0gJ2ZpeGVkJzsKICAgICAgICBwYXJlbnQgPSBwYXJlbnQucGFyZW50Tm9kZTsKICAgICAgfSAvLyB3ZSBzaG93IHRoZSBzcGFjZXIgZm9yIHRoZSBpbml0aWFsIGVsZW1lbnQKCgogICAgICBpZiAob3B0aW9ucy5oaWRlRnJvbUNsb25lICE9PSB0cnVlKSB7CiAgICAgICAgZWxGcm9tQ2xvbmUuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7CiAgICAgICAgZWxGcm9tQ2xvbmUuc3R5bGUuZmxleCA9ICcwIDAgYXV0byc7CiAgICAgICAgZWxGcm9tQ2xvbmUuc3R5bGUub3BhY2l0eSA9IDA7CiAgICAgICAgZWxGcm9tQ2xvbmUuc3R5bGUubWluV2lkdGggPSAndW5zZXQnOwogICAgICAgIGVsRnJvbUNsb25lLnN0eWxlLm1heFdpZHRoID0gJ3Vuc2V0JzsKICAgICAgICBlbEZyb21DbG9uZS5zdHlsZS5taW5IZWlnaHQgPSAndW5zZXQnOwogICAgICAgIGVsRnJvbUNsb25lLnN0eWxlLm1heEhlaWdodCA9ICd1bnNldCc7CiAgICAgICAgZWxGcm9tQ2xvbmUuY2xhc3NMaXN0LnJlbW92ZSgncS1tb3JwaC0taW50ZXJuYWwnKTsKICAgICAgfSAvLyB3ZSBzaG93IHRoZSBzcGFjZXIgZm9yIHRoZSBmaW5hbCBlbGVtZW50CgoKICAgICAgaWYgKG9wdGlvbnMua2VlcFRvQ2xvbmUgIT09IHRydWUpIHsKICAgICAgICBlbFRvQ2xvbmUuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7CiAgICAgICAgZWxUb0Nsb25lLnN0eWxlLmZsZXggPSAnMCAwIGF1dG8nOwogICAgICAgIGVsVG9DbG9uZS5zdHlsZS5vcGFjaXR5ID0gMDsKICAgICAgICBlbFRvQ2xvbmUuc3R5bGUubWluV2lkdGggPSAndW5zZXQnOwogICAgICAgIGVsVG9DbG9uZS5zdHlsZS5tYXhXaWR0aCA9ICd1bnNldCc7CiAgICAgICAgZWxUb0Nsb25lLnN0eWxlLm1pbkhlaWdodCA9ICd1bnNldCc7CiAgICAgICAgZWxUb0Nsb25lLnN0eWxlLm1heEhlaWdodCA9ICd1bnNldCc7CiAgICAgIH0KCiAgICAgIGVsVG9DbG9uZS5jbGFzc0xpc3QucmVtb3ZlKCdxLW1vcnBoLS1pbnRlcm5hbCcpOyAvLyB3ZSBhcHBseSBjbGFzc2VzIHNwZWNpZmllZCBieSB1c2VyCgogICAgICBpZiAodHlwZW9mIG9wdGlvbnMuY2xhc3NlcyA9PT0gJ3N0cmluZycpIHsKICAgICAgICBlbFRvLmNsYXNzTmFtZSArPSAnICcgKyBvcHRpb25zLmNsYXNzZXM7CiAgICAgIH0gLy8gd2UgYXBwbHkgc3R5bGVzIHNwZWNpZmllZCBieSB1c2VyCgoKICAgICAgaWYgKHR5cGVvZiBvcHRpb25zLnN0eWxlID09PSAnc3RyaW5nJykgewogICAgICAgIGVsVG8uc3R5bGUuY3NzVGV4dCArPSAnICcgKyBvcHRpb25zLnN0eWxlOwogICAgICB9IGVsc2UgaWYgKGlzUGxhaW5PYmplY3Qob3B0aW9ucy5zdHlsZSkgPT09IHRydWUpIHsKICAgICAgICBmb3IgKHZhciBwcm9wIGluIG9wdGlvbnMuc3R5bGUpIHsKICAgICAgICAgIGVsVG8uc3R5bGVbcHJvcF0gPSBvcHRpb25zLnN0eWxlW3Byb3BdOwogICAgICAgIH0KICAgICAgfQoKICAgICAgdmFyIGVsRnJvbVpJbmRleCA9IGdldE1heFpJbmRleChlbEZyb21DbG9uZSk7CiAgICAgIHZhciBlbFRvWkluZGV4ID0gZ2V0TWF4WkluZGV4KGVsVG8pOyAvLyB3ZSBwb3NpdGlvbiB0aGUgbW9ycGhpbmcgZWxlbWVudAogICAgICAvLyBpZiB3ZSB1c2UgZml4ZWQgcG9zaXRpb24gZm9yIHRoZSBmaW5hbCBlbGVtZW50IHdlIG5lZWQgdG8gYWRqdXN0IGZvciBzY3JvbGwKCiAgICAgIHZhciBkb2N1bWVudFNjcm9sbCA9IGVsVG9OZWVkc0ZpeGVkUG9zaXRpb24gPT09IHRydWUgPyBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQgOiB7CiAgICAgICAgc2Nyb2xsTGVmdDogMCwKICAgICAgICBzY3JvbGxUb3A6IDAKICAgICAgfTsKICAgICAgZWxUby5zdHlsZS5wb3NpdGlvbiA9IGVsVG9OZWVkc0ZpeGVkUG9zaXRpb24gPT09IHRydWUgPyAnZml4ZWQnIDogJ2Fic29sdXRlJzsKICAgICAgZWxUby5zdHlsZS5sZWZ0ID0gIiIuY29uY2F0KGVsVG9Qb3NpdGlvbi5sZWZ0IC0gZG9jdW1lbnRTY3JvbGwuc2Nyb2xsTGVmdCwgInB4Iik7CiAgICAgIGVsVG8uc3R5bGUucmlnaHQgPSAndW5zZXQnOwogICAgICBlbFRvLnN0eWxlLnRvcCA9ICIiLmNvbmNhdChlbFRvUG9zaXRpb24udG9wIC0gZG9jdW1lbnRTY3JvbGwuc2Nyb2xsVG9wLCAicHgiKTsKICAgICAgZWxUby5zdHlsZS5tYXJnaW4gPSAwOwoKICAgICAgaWYgKG9wdGlvbnMucmVzaXplID09PSB0cnVlKSB7CiAgICAgICAgZWxUby5zdHlsZS5taW5XaWR0aCA9ICd1bnNldCc7CiAgICAgICAgZWxUby5zdHlsZS5tYXhXaWR0aCA9ICd1bnNldCc7CiAgICAgICAgZWxUby5zdHlsZS5taW5IZWlnaHQgPSAndW5zZXQnOwogICAgICAgIGVsVG8uc3R5bGUubWF4SGVpZ2h0ID0gJ3Vuc2V0JzsKICAgICAgICBlbFRvLnN0eWxlLm92ZXJmbG93ID0gJ2hpZGRlbic7CiAgICAgICAgZWxUby5zdHlsZS5vdmVyZmxvd1ggPSAnaGlkZGVuJzsKICAgICAgICBlbFRvLnN0eWxlLm92ZXJmbG93WSA9ICdoaWRkZW4nOwogICAgICB9CgogICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGVsVG8pOwoKICAgICAgaWYgKGVsRnJvbVR3ZWVuICE9PSB2b2lkIDApIHsKICAgICAgICBlbEZyb21Ud2Vlbi5zdHlsZS5jc3NUZXh0ID0gZWxGcm9tQ3NzVGV4dDsKICAgICAgICBlbEZyb21Ud2Vlbi5zdHlsZS50cmFuc2Zvcm0gPSAnbm9uZSc7CiAgICAgICAgZWxGcm9tVHdlZW4uc3R5bGUuYW5pbWF0aW9uID0gJ25vbmUnOwogICAgICAgIGVsRnJvbVR3ZWVuLnN0eWxlLnRyYW5zaXRpb24gPSAnbm9uZSc7CiAgICAgICAgZWxGcm9tVHdlZW4uc3R5bGUucG9zaXRpb24gPSBlbFRvLnN0eWxlLnBvc2l0aW9uOwogICAgICAgIGVsRnJvbVR3ZWVuLnN0eWxlLmxlZnQgPSAiIi5jb25jYXQoZWxGcm9tUG9zaXRpb24ubGVmdCAtIGRvY3VtZW50U2Nyb2xsLnNjcm9sbExlZnQsICJweCIpOwogICAgICAgIGVsRnJvbVR3ZWVuLnN0eWxlLnJpZ2h0ID0gJ3Vuc2V0JzsKICAgICAgICBlbEZyb21Ud2Vlbi5zdHlsZS50b3AgPSAiIi5jb25jYXQoZWxGcm9tUG9zaXRpb24udG9wIC0gZG9jdW1lbnRTY3JvbGwuc2Nyb2xsVG9wLCAicHgiKTsKICAgICAgICBlbEZyb21Ud2Vlbi5zdHlsZS5tYXJnaW4gPSAwOwogICAgICAgIGVsRnJvbVR3ZWVuLnN0eWxlLnBvaW50ZXJFdmVudHMgPSAnbm9uZSc7CgogICAgICAgIGlmIChvcHRpb25zLnJlc2l6ZSA9PT0gdHJ1ZSkgewogICAgICAgICAgZWxGcm9tVHdlZW4uc3R5bGUubWluV2lkdGggPSAndW5zZXQnOwogICAgICAgICAgZWxGcm9tVHdlZW4uc3R5bGUubWF4V2lkdGggPSAndW5zZXQnOwogICAgICAgICAgZWxGcm9tVHdlZW4uc3R5bGUubWluSGVpZ2h0ID0gJ3Vuc2V0JzsKICAgICAgICAgIGVsRnJvbVR3ZWVuLnN0eWxlLm1heEhlaWdodCA9ICd1bnNldCc7CiAgICAgICAgICBlbEZyb21Ud2Vlbi5zdHlsZS5vdmVyZmxvdyA9ICdoaWRkZW4nOwogICAgICAgICAgZWxGcm9tVHdlZW4uc3R5bGUub3ZlcmZsb3dYID0gJ2hpZGRlbic7CiAgICAgICAgICBlbEZyb21Ud2Vlbi5zdHlsZS5vdmVyZmxvd1kgPSAnaGlkZGVuJzsKICAgICAgICB9CgogICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoZWxGcm9tVHdlZW4pOwogICAgICB9CgogICAgICB2YXIgY29tbW9uQ2xlYW51cCA9IGZ1bmN0aW9uIGNvbW1vbkNsZWFudXAoYWJvcnRlZCkgewogICAgICAgIC8vIHdlIHB1dCB0aGUgZWxlbWVudCBiYWNrIGluIGl0J3MgcGxhY2UKICAgICAgICAvLyBhbmQgcmVzdG9yZSB0aGUgc3R5bGVzIGFuZCBjbGFzc2VzCiAgICAgICAgaWYgKGVsRnJvbSA9PT0gZWxUbyAmJiBlbmRFbGVtZW50VG8gIT09IHRydWUpIHsKICAgICAgICAgIGVsVG8uc3R5bGUuY3NzVGV4dCA9IGVsRnJvbVN0eWxlU2F2ZWQ7CiAgICAgICAgICBlbFRvLmNsYXNzTmFtZSA9IGVsRnJvbUNsYXNzU2F2ZWQ7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGVsVG8uc3R5bGUuY3NzVGV4dCA9IGVsVG9TdHlsZVNhdmVkOwogICAgICAgICAgZWxUby5jbGFzc05hbWUgPSBlbFRvQ2xhc3NTYXZlZDsKICAgICAgICB9CgogICAgICAgIGVsVG9DbG9uZS5wYXJlbnROb2RlID09PSBlbFRvUGFyZW50ICYmIGVsVG9QYXJlbnQuaW5zZXJ0QmVmb3JlKGVsVG8sIGVsVG9DbG9uZSk7IC8vIHdlIGNsZWFuIHRoZSBzcGFjZXJzCgogICAgICAgIGVsRnJvbUNsb25lLnJlbW92ZSgpOwogICAgICAgIGVsVG9DbG9uZS5yZW1vdmUoKTsKICAgICAgICBlbEZyb21Ud2VlbiAhPT0gdm9pZCAwICYmIGVsRnJvbVR3ZWVuLnJlbW92ZSgpOyAvLyBjYW5jZWwgd2lsbCBiZSBubyBsb25nZXIgYXZhaWxhYmxlCgogICAgICAgIGNhbmNlbCA9IGZ1bmN0aW9uIGNhbmNlbCgpIHsKICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9OwoKICAgICAgICBlbEZyb20ucU1vcnBoQ2FuY2VsID0gdm9pZCAwOwogICAgICAgIGVsVG8ucU1vcnBoQ2FuY2VsID0gdm9pZCAwOyAvLyB3ZSBhcmUgcmVhZHkKCiAgICAgICAgaWYgKHR5cGVvZiBvcHRpb25zLm9uRW5kID09PSAnZnVuY3Rpb24nKSB7CiAgICAgICAgICBvcHRpb25zLm9uRW5kKGVuZEVsZW1lbnRUbyA9PT0gdHJ1ZSA/ICd0bycgOiAnZnJvbScsIGFib3J0ZWQgPT09IHRydWUpOwogICAgICAgIH0KICAgICAgfTsKCiAgICAgIGlmIChvcHRpb25zLnVzZUNTUyAhPT0gdHJ1ZSAmJiB0eXBlb2YgZWxUby5hbmltYXRlID09PSAnZnVuY3Rpb24nKSB7CiAgICAgICAgdmFyIHJlc2l6ZUZyb20gPSBvcHRpb25zLnJlc2l6ZSA9PT0gdHJ1ZSA/IHsKICAgICAgICAgIHRyYW5zZm9ybTogInRyYW5zbGF0ZSgiLmNvbmNhdChkZWx0YVgsICJweCwgIikuY29uY2F0KGRlbHRhWSwgInB4KSIpLAogICAgICAgICAgd2lkdGg6ICIiLmNvbmNhdChlbEZyb21DbG9uZVdpZHRoLCAicHgiKSwKICAgICAgICAgIGhlaWdodDogIiIuY29uY2F0KGVsRnJvbUNsb25lSGVpZ2h0LCAicHgiKQogICAgICAgIH0gOiB7CiAgICAgICAgICB0cmFuc2Zvcm06ICJ0cmFuc2xhdGUoIi5jb25jYXQoZGVsdGFYLCAicHgsICIpLmNvbmNhdChkZWx0YVksICJweCkgc2NhbGUoIikuY29uY2F0KHNjYWxlWCwgIiwgIikuY29uY2F0KHNjYWxlWSwgIikiKQogICAgICAgIH07CiAgICAgICAgdmFyIHJlc2l6ZVRvID0gb3B0aW9ucy5yZXNpemUgPT09IHRydWUgPyB7CiAgICAgICAgICB3aWR0aDogIiIuY29uY2F0KGVsVG9DbG9uZVdpZHRoLCAicHgiKSwKICAgICAgICAgIGhlaWdodDogIiIuY29uY2F0KGVsVG9DbG9uZUhlaWdodCwgInB4IikKICAgICAgICB9IDoge307CiAgICAgICAgdmFyIHJlc2l6ZUZyb21Ud2VlbiA9IG9wdGlvbnMucmVzaXplID09PSB0cnVlID8gewogICAgICAgICAgd2lkdGg6ICIiLmNvbmNhdChlbEZyb21DbG9uZVdpZHRoLCAicHgiKSwKICAgICAgICAgIGhlaWdodDogIiIuY29uY2F0KGVsRnJvbUNsb25lSGVpZ2h0LCAicHgiKQogICAgICAgIH0gOiB7fTsKICAgICAgICB2YXIgcmVzaXplVG9Ud2VlbiA9IG9wdGlvbnMucmVzaXplID09PSB0cnVlID8gewogICAgICAgICAgdHJhbnNmb3JtOiAidHJhbnNsYXRlKCIuY29uY2F0KC0xICogZGVsdGFYLCAicHgsICIpLmNvbmNhdCgtMSAqIGRlbHRhWSwgInB4KSIpLAogICAgICAgICAgd2lkdGg6ICIiLmNvbmNhdChlbFRvQ2xvbmVXaWR0aCwgInB4IiksCiAgICAgICAgICBoZWlnaHQ6ICIiLmNvbmNhdChlbFRvQ2xvbmVIZWlnaHQsICJweCIpCiAgICAgICAgfSA6IHsKICAgICAgICAgIHRyYW5zZm9ybTogInRyYW5zbGF0ZSgiLmNvbmNhdCgtMSAqIGRlbHRhWCwgInB4LCAiKS5jb25jYXQoLTEgKiBkZWx0YVksICJweCkgc2NhbGUoIikuY29uY2F0KDEgLyBzY2FsZVgsICIsICIpLmNvbmNhdCgxIC8gc2NhbGVZLCAiKSIpCiAgICAgICAgfTsKICAgICAgICB2YXIgdHdlZW5Gcm9tID0gZWxGcm9tVHdlZW4gIT09IHZvaWQgMCA/IHsKICAgICAgICAgIG9wYWNpdHk6IG9wdGlvbnMudHdlZW5Ub09wYWNpdHkKICAgICAgICB9IDogewogICAgICAgICAgYmFja2dyb3VuZENvbG9yOiBlbEZyb21CYWNrZ3JvdW5kCiAgICAgICAgfTsKICAgICAgICB2YXIgdHdlZW5UbyA9IGVsRnJvbVR3ZWVuICE9PSB2b2lkIDAgPyB7CiAgICAgICAgICBvcGFjaXR5OiAxCiAgICAgICAgfSA6IHsKICAgICAgICAgIGJhY2tncm91bmRDb2xvcjogZWxUb0JhY2tncm91bmQKICAgICAgICB9OwogICAgICAgIGFuaW1hdGlvblRvID0gZWxUby5hbmltYXRlKFtfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoewogICAgICAgICAgbWFyZ2luOiAwLAogICAgICAgICAgYm9yZGVyV2lkdGg6IGVsRnJvbUJvcmRlcldpZHRoLAogICAgICAgICAgYm9yZGVyU3R5bGU6IGVsRnJvbUJvcmRlclN0eWxlLAogICAgICAgICAgYm9yZGVyQ29sb3I6IGVsRnJvbUJvcmRlckNvbG9yLAogICAgICAgICAgYm9yZGVyUmFkaXVzOiBlbEZyb21Cb3JkZXJSYWRpdXMsCiAgICAgICAgICB6SW5kZXg6IGVsRnJvbVpJbmRleCwKICAgICAgICAgIHRyYW5zZm9ybU9yaWdpbjogJzAgMCcKICAgICAgICB9LCByZXNpemVGcm9tKSwgdHdlZW5Gcm9tKSwgX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHsKICAgICAgICAgIG1hcmdpbjogMCwKICAgICAgICAgIGJvcmRlcldpZHRoOiBlbFRvQm9yZGVyV2lkdGgsCiAgICAgICAgICBib3JkZXJTdHlsZTogZWxUb0JvcmRlclN0eWxlLAogICAgICAgICAgYm9yZGVyQ29sb3I6IGVsVG9Cb3JkZXJDb2xvciwKICAgICAgICAgIGJvcmRlclJhZGl1czogZWxUb0JvcmRlclJhZGl1cywKICAgICAgICAgIHpJbmRleDogZWxUb1pJbmRleCwKICAgICAgICAgIHRyYW5zZm9ybU9yaWdpbjogJzAgMCcsCiAgICAgICAgICB0cmFuc2Zvcm06IGVsVG9UcmFuc2Zvcm0KICAgICAgICB9LCByZXNpemVUbyksIHR3ZWVuVG8pXSwgewogICAgICAgICAgZHVyYXRpb246IG9wdGlvbnMuZHVyYXRpb24sCiAgICAgICAgICBlYXNpbmc6IG9wdGlvbnMuZWFzaW5nLAogICAgICAgICAgZmlsbDogb3B0aW9ucy5maWxsLAogICAgICAgICAgZGVsYXk6IG9wdGlvbnMuZGVsYXkKICAgICAgICB9KTsKICAgICAgICBhbmltYXRpb25Gcm9tVHdlZW4gPSBlbEZyb21Ud2VlbiA9PT0gdm9pZCAwID8gdm9pZCAwIDogZWxGcm9tVHdlZW4uYW5pbWF0ZShbX29iamVjdFNwcmVhZCh7CiAgICAgICAgICBvcGFjaXR5OiBvcHRpb25zLnR3ZWVuRnJvbU9wYWNpdHksCiAgICAgICAgICBtYXJnaW46IDAsCiAgICAgICAgICBib3JkZXJXaWR0aDogZWxGcm9tQm9yZGVyV2lkdGgsCiAgICAgICAgICBib3JkZXJTdHlsZTogZWxGcm9tQm9yZGVyU3R5bGUsCiAgICAgICAgICBib3JkZXJDb2xvcjogZWxGcm9tQm9yZGVyQ29sb3IsCiAgICAgICAgICBib3JkZXJSYWRpdXM6IGVsRnJvbUJvcmRlclJhZGl1cywKICAgICAgICAgIHpJbmRleDogZWxGcm9tWkluZGV4LAogICAgICAgICAgdHJhbnNmb3JtT3JpZ2luOiAnMCAwJywKICAgICAgICAgIHRyYW5zZm9ybTogZWxGcm9tVHJhbnNmb3JtCiAgICAgICAgfSwgcmVzaXplRnJvbVR3ZWVuKSwgX29iamVjdFNwcmVhZCh7CiAgICAgICAgICBvcGFjaXR5OiAwLAogICAgICAgICAgbWFyZ2luOiAwLAogICAgICAgICAgYm9yZGVyV2lkdGg6IGVsVG9Cb3JkZXJXaWR0aCwKICAgICAgICAgIGJvcmRlclN0eWxlOiBlbFRvQm9yZGVyU3R5bGUsCiAgICAgICAgICBib3JkZXJDb2xvcjogZWxUb0JvcmRlckNvbG9yLAogICAgICAgICAgYm9yZGVyUmFkaXVzOiBlbFRvQm9yZGVyUmFkaXVzLAogICAgICAgICAgekluZGV4OiBlbFRvWkluZGV4LAogICAgICAgICAgdHJhbnNmb3JtT3JpZ2luOiAnMCAwJwogICAgICAgIH0sIHJlc2l6ZVRvVHdlZW4pXSwgewogICAgICAgICAgZHVyYXRpb246IG9wdGlvbnMuZHVyYXRpb24sCiAgICAgICAgICBlYXNpbmc6IG9wdGlvbnMuZWFzaW5nLAogICAgICAgICAgZmlsbDogb3B0aW9ucy5maWxsLAogICAgICAgICAgZGVsYXk6IG9wdGlvbnMuZGVsYXkKICAgICAgICB9KTsKICAgICAgICBhbmltYXRpb25Gcm9tQ2xvbmUgPSBvcHRpb25zLmhpZGVGcm9tQ2xvbmUgPT09IHRydWUgfHwgZWxTaGFyZWRTaXplID09PSB0cnVlID8gdm9pZCAwIDogZWxGcm9tQ2xvbmUuYW5pbWF0ZShbewogICAgICAgICAgbWFyZ2luOiAiIi5jb25jYXQoZWxGcm9tUGFyZW50SGVpZ2h0RGlmZiA8IDAgPyBlbEZyb21QYXJlbnRIZWlnaHREaWZmIC8gMiA6IDAsICJweCAiKS5jb25jYXQoZWxGcm9tUGFyZW50V2lkdGhEaWZmIDwgMCA/IGVsRnJvbVBhcmVudFdpZHRoRGlmZiAvIDIgOiAwLCAicHgiKSwKICAgICAgICAgIHdpZHRoOiAiIi5jb25jYXQoZWxGcm9tQ2xvbmVXaWR0aCArIGVsRnJvbVBvc2l0aW9uLm1hcmdpbkgsICJweCIpLAogICAgICAgICAgaGVpZ2h0OiAiIi5jb25jYXQoZWxGcm9tQ2xvbmVIZWlnaHQgKyBlbEZyb21Qb3NpdGlvbi5tYXJnaW5WLCAicHgiKQogICAgICAgIH0sIHsKICAgICAgICAgIG1hcmdpbjogMCwKICAgICAgICAgIHdpZHRoOiAwLAogICAgICAgICAgaGVpZ2h0OiAwCiAgICAgICAgfV0sIHsKICAgICAgICAgIGR1cmF0aW9uOiBvcHRpb25zLmR1cmF0aW9uLAogICAgICAgICAgZWFzaW5nOiBvcHRpb25zLmVhc2luZywKICAgICAgICAgIGZpbGw6IG9wdGlvbnMuZmlsbCwKICAgICAgICAgIGRlbGF5OiBvcHRpb25zLmRlbGF5CiAgICAgICAgfSk7CiAgICAgICAgYW5pbWF0aW9uVG9DbG9uZSA9IG9wdGlvbnMua2VlcFRvQ2xvbmUgPT09IHRydWUgPyB2b2lkIDAgOiBlbFRvQ2xvbmUuYW5pbWF0ZShbZWxTaGFyZWRTaXplID09PSB0cnVlID8gewogICAgICAgICAgbWFyZ2luOiAiIi5jb25jYXQoZWxGcm9tUGFyZW50SGVpZ2h0RGlmZiA8IDAgPyBlbEZyb21QYXJlbnRIZWlnaHREaWZmIC8gMiA6IDAsICJweCAiKS5jb25jYXQoZWxGcm9tUGFyZW50V2lkdGhEaWZmIDwgMCA/IGVsRnJvbVBhcmVudFdpZHRoRGlmZiAvIDIgOiAwLCAicHgiKSwKICAgICAgICAgIHdpZHRoOiAiIi5jb25jYXQoZWxGcm9tQ2xvbmVXaWR0aCArIGVsRnJvbVBvc2l0aW9uLm1hcmdpbkgsICJweCIpLAogICAgICAgICAgaGVpZ2h0OiAiIi5jb25jYXQoZWxGcm9tQ2xvbmVIZWlnaHQgKyBlbEZyb21Qb3NpdGlvbi5tYXJnaW5WLCAicHgiKQogICAgICAgIH0gOiB7CiAgICAgICAgICBtYXJnaW46IDAsCiAgICAgICAgICB3aWR0aDogMCwKICAgICAgICAgIGhlaWdodDogMAogICAgICAgIH0sIHsKICAgICAgICAgIG1hcmdpbjogIiIuY29uY2F0KGVsVG9QYXJlbnRIZWlnaHREaWZmIDwgMCA/IGVsVG9QYXJlbnRIZWlnaHREaWZmIC8gMiA6IDAsICJweCAiKS5jb25jYXQoZWxUb1BhcmVudFdpZHRoRGlmZiA8IDAgPyBlbFRvUGFyZW50V2lkdGhEaWZmIC8gMiA6IDAsICJweCIpLAogICAgICAgICAgd2lkdGg6ICIiLmNvbmNhdChlbFRvQ2xvbmVXaWR0aCArIGVsVG9Qb3NpdGlvbi5tYXJnaW5ILCAicHgiKSwKICAgICAgICAgIGhlaWdodDogIiIuY29uY2F0KGVsVG9DbG9uZUhlaWdodCArIGVsVG9Qb3NpdGlvbi5tYXJnaW5WLCAicHgiKQogICAgICAgIH1dLCB7CiAgICAgICAgICBkdXJhdGlvbjogb3B0aW9ucy5kdXJhdGlvbiwKICAgICAgICAgIGVhc2luZzogb3B0aW9ucy5lYXNpbmcsCiAgICAgICAgICBmaWxsOiBvcHRpb25zLmZpbGwsCiAgICAgICAgICBkZWxheTogb3B0aW9ucy5kZWxheQogICAgICAgIH0pOwoKICAgICAgICB2YXIgY2xlYW51cCA9IGZ1bmN0aW9uIGNsZWFudXAoYWJvcnQpIHsKICAgICAgICAgIGFuaW1hdGlvbkZyb21DbG9uZSAhPT0gdm9pZCAwICYmIGFuaW1hdGlvbkZyb21DbG9uZS5jYW5jZWwoKTsKICAgICAgICAgIGFuaW1hdGlvbkZyb21Ud2VlbiAhPT0gdm9pZCAwICYmIGFuaW1hdGlvbkZyb21Ud2Vlbi5jYW5jZWwoKTsKICAgICAgICAgIGFuaW1hdGlvblRvQ2xvbmUgIT09IHZvaWQgMCAmJiBhbmltYXRpb25Ub0Nsb25lLmNhbmNlbCgpOwogICAgICAgICAgYW5pbWF0aW9uVG8uY2FuY2VsKCk7CiAgICAgICAgICBhbmltYXRpb25Uby5yZW1vdmVFdmVudExpc3RlbmVyKCdmaW5pc2gnLCBjbGVhbnVwKTsKICAgICAgICAgIGFuaW1hdGlvblRvLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NhbmNlbCcsIGNsZWFudXApOwogICAgICAgICAgY29tbW9uQ2xlYW51cChhYm9ydCk7IC8vIHdlIGNsZWFuIHRoZSBhbmltYXRpb25zCgogICAgICAgICAgYW5pbWF0aW9uRnJvbUNsb25lID0gdm9pZCAwOwogICAgICAgICAgYW5pbWF0aW9uRnJvbVR3ZWVuID0gdm9pZCAwOwogICAgICAgICAgYW5pbWF0aW9uVG9DbG9uZSA9IHZvaWQgMDsKICAgICAgICAgIGFuaW1hdGlvblRvID0gdm9pZCAwOwogICAgICAgIH07CgogICAgICAgIGVsRnJvbS5xTW9ycGhDYW5jZWwgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICBlbEZyb20ucU1vcnBoQ2FuY2VsID0gdm9pZCAwOwogICAgICAgICAgY2FuY2VsU3RhdHVzID0gdHJ1ZTsKICAgICAgICAgIGNsZWFudXAoKTsKICAgICAgICB9OwoKICAgICAgICBlbFRvLnFNb3JwaENhbmNlbCA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgIGVsVG8ucU1vcnBoQ2FuY2VsID0gdm9pZCAwOwogICAgICAgICAgY2FuY2VsU3RhdHVzID0gdHJ1ZTsKICAgICAgICAgIGNsZWFudXAoKTsKICAgICAgICB9OwoKICAgICAgICBhbmltYXRpb25Uby5hZGRFdmVudExpc3RlbmVyKCdmaW5pc2gnLCBjbGVhbnVwKTsKICAgICAgICBhbmltYXRpb25Uby5hZGRFdmVudExpc3RlbmVyKCdjYW5jZWwnLCBjbGVhbnVwKTsKCiAgICAgICAgY2FuY2VsID0gZnVuY3Rpb24gY2FuY2VsKGFib3J0KSB7CiAgICAgICAgICAvLyB3ZSBhcmUgbm90IGluIGEgbW9ycGggdGhhdCB3ZSBjYW4gY2FuY2VsCiAgICAgICAgICBpZiAoY2FuY2VsU3RhdHVzID09PSB0cnVlIHx8IGFuaW1hdGlvblRvID09PSB2b2lkIDApIHsKICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgICAgfQoKICAgICAgICAgIGlmIChhYm9ydCA9PT0gdHJ1ZSkgewogICAgICAgICAgICBjbGVhbnVwKHRydWUpOwogICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICAgIH0KCiAgICAgICAgICBlbmRFbGVtZW50VG8gPSBlbmRFbGVtZW50VG8gIT09IHRydWU7CiAgICAgICAgICBhbmltYXRpb25Gcm9tQ2xvbmUgIT09IHZvaWQgMCAmJiBhbmltYXRpb25Gcm9tQ2xvbmUucmV2ZXJzZSgpOwogICAgICAgICAgYW5pbWF0aW9uRnJvbVR3ZWVuICE9PSB2b2lkIDAgJiYgYW5pbWF0aW9uRnJvbVR3ZWVuLnJldmVyc2UoKTsKICAgICAgICAgIGFuaW1hdGlvblRvQ2xvbmUgIT09IHZvaWQgMCAmJiBhbmltYXRpb25Ub0Nsb25lLnJldmVyc2UoKTsKICAgICAgICAgIGFuaW1hdGlvblRvLnJldmVyc2UoKTsKICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgIH07CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdmFyIHFBbmltSWQgPSAicS1tb3JwaC1hbmltLSIuY29uY2F0KCsraWQpOwogICAgICAgIHZhciBzdHlsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3N0eWxlJyk7CgogICAgICAgIHZhciBfcmVzaXplRnJvbSA9IG9wdGlvbnMucmVzaXplID09PSB0cnVlID8gIlxuICAgICAgICAgICAgdHJhbnNmb3JtOiB0cmFuc2xhdGUoIi5jb25jYXQoZGVsdGFYLCAicHgsICIpLmNvbmNhdChkZWx0YVksICJweCk7XG4gICAgICAgICAgICB3aWR0aDogIikuY29uY2F0KGVsRnJvbUNsb25lV2lkdGgsICJweDtcbiAgICAgICAgICAgIGhlaWdodDogIikuY29uY2F0KGVsRnJvbUNsb25lSGVpZ2h0LCAicHg7XG4gICAgICAgICAgIikgOiAidHJhbnNmb3JtOiB0cmFuc2xhdGUoIi5jb25jYXQoZGVsdGFYLCAicHgsICIpLmNvbmNhdChkZWx0YVksICJweCkgc2NhbGUoIikuY29uY2F0KHNjYWxlWCwgIiwgIikuY29uY2F0KHNjYWxlWSwgIik7Iik7CgogICAgICAgIHZhciBfcmVzaXplVG8gPSBvcHRpb25zLnJlc2l6ZSA9PT0gdHJ1ZSA/ICJcbiAgICAgICAgICAgIHdpZHRoOiAiLmNvbmNhdChlbFRvQ2xvbmVXaWR0aCwgInB4O1xuICAgICAgICAgICAgaGVpZ2h0OiAiKS5jb25jYXQoZWxUb0Nsb25lSGVpZ2h0LCAicHg7XG4gICAgICAgICAgIikgOiAnJzsKCiAgICAgICAgdmFyIF9yZXNpemVGcm9tVHdlZW4gPSBvcHRpb25zLnJlc2l6ZSA9PT0gdHJ1ZSA/ICJcbiAgICAgICAgICAgIHdpZHRoOiAiLmNvbmNhdChlbEZyb21DbG9uZVdpZHRoLCAicHg7XG4gICAgICAgICAgICBoZWlnaHQ6ICIpLmNvbmNhdChlbEZyb21DbG9uZUhlaWdodCwgInB4O1xuICAgICAgICAgICIpIDogJyc7CgogICAgICAgIHZhciBfcmVzaXplVG9Ud2VlbiA9IG9wdGlvbnMucmVzaXplID09PSB0cnVlID8gIlxuICAgICAgICAgICAgdHJhbnNmb3JtOiB0cmFuc2xhdGUoIi5jb25jYXQoLTEgKiBkZWx0YVgsICJweCwgIikuY29uY2F0KC0xICogZGVsdGFZLCAicHgpO1xuICAgICAgICAgICAgd2lkdGg6ICIpLmNvbmNhdChlbFRvQ2xvbmVXaWR0aCwgInB4O1xuICAgICAgICAgICAgaGVpZ2h0OiAiKS5jb25jYXQoZWxUb0Nsb25lSGVpZ2h0LCAicHg7XG4gICAgICAgICAgIikgOiAidHJhbnNmb3JtOiB0cmFuc2xhdGUoIi5jb25jYXQoLTEgKiBkZWx0YVgsICJweCwgIikuY29uY2F0KC0xICogZGVsdGFZLCAicHgpIHNjYWxlKCIpLmNvbmNhdCgxIC8gc2NhbGVYLCAiLCAiKS5jb25jYXQoMSAvIHNjYWxlWSwgIik7Iik7CgogICAgICAgIHZhciBfdHdlZW5Gcm9tID0gZWxGcm9tVHdlZW4gIT09IHZvaWQgMCA/ICJvcGFjaXR5OiAiLmNvbmNhdChvcHRpb25zLnR3ZWVuVG9PcGFjaXR5LCAiOyIpIDogImJhY2tncm91bmQtY29sb3I6ICIuY29uY2F0KGVsRnJvbUJhY2tncm91bmQsICI7Iik7CgogICAgICAgIHZhciBfdHdlZW5UbyA9IGVsRnJvbVR3ZWVuICE9PSB2b2lkIDAgPyAnb3BhY2l0eTogMTsnIDogImJhY2tncm91bmQtY29sb3I6ICIuY29uY2F0KGVsVG9CYWNrZ3JvdW5kLCAiOyIpOwoKICAgICAgICB2YXIga2V5ZnJhbWVzRnJvbVR3ZWVuID0gZWxGcm9tVHdlZW4gPT09IHZvaWQgMCA/ICcnIDogIlxuICAgICAgICAgICAgQGtleWZyYW1lcyAiLmNvbmNhdChxQW5pbUlkLCAiLWZyb20tdHdlZW4ge1xuICAgICAgICAgICAgICAwJSB7XG4gICAgICAgICAgICAgICAgb3BhY2l0eTogIikuY29uY2F0KG9wdGlvbnMudHdlZW5Gcm9tT3BhY2l0eSwgIjtcbiAgICAgICAgICAgICAgICBtYXJnaW46IDA7XG4gICAgICAgICAgICAgICAgYm9yZGVyLXdpZHRoOiAiKS5jb25jYXQoZWxGcm9tQm9yZGVyV2lkdGgsICI7XG4gICAgICAgICAgICAgICAgYm9yZGVyLXN0eWxlOiAiKS5jb25jYXQoZWxGcm9tQm9yZGVyU3R5bGUsICI7XG4gICAgICAgICAgICAgICAgYm9yZGVyLWNvbG9yOiAiKS5jb25jYXQoZWxGcm9tQm9yZGVyQ29sb3IsICI7XG4gICAgICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogIikuY29uY2F0KGVsRnJvbUJvcmRlclJhZGl1cywgIjtcbiAgICAgICAgICAgICAgICB6LWluZGV4OiAiKS5jb25jYXQoZWxGcm9tWkluZGV4LCAiO1xuICAgICAgICAgICAgICAgIHRyYW5zZm9ybS1vcmlnaW46IDAgMDtcbiAgICAgICAgICAgICAgICB0cmFuc2Zvcm06ICIpLmNvbmNhdChlbEZyb21UcmFuc2Zvcm0sICI7XG4gICAgICAgICAgICAgICAgIikuY29uY2F0KF9yZXNpemVGcm9tVHdlZW4sICJcbiAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgIDEwMCUge1xuICAgICAgICAgICAgICAgIG9wYWNpdHk6IDA7XG4gICAgICAgICAgICAgICAgbWFyZ2luOiAwO1xuICAgICAgICAgICAgICAgIGJvcmRlci13aWR0aDogIikuY29uY2F0KGVsVG9Cb3JkZXJXaWR0aCwgIjtcbiAgICAgICAgICAgICAgICBib3JkZXItc3R5bGU6ICIpLmNvbmNhdChlbFRvQm9yZGVyU3R5bGUsICI7XG4gICAgICAgICAgICAgICAgYm9yZGVyLWNvbG9yOiAiKS5jb25jYXQoZWxUb0JvcmRlckNvbG9yLCAiO1xuICAgICAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6ICIpLmNvbmNhdChlbFRvQm9yZGVyUmFkaXVzLCAiO1xuICAgICAgICAgICAgICAgIHotaW5kZXg6ICIpLmNvbmNhdChlbFRvWkluZGV4LCAiO1xuICAgICAgICAgICAgICAgIHRyYW5zZm9ybS1vcmlnaW46IDAgMDtcbiAgICAgICAgICAgICAgICAiKS5jb25jYXQoX3Jlc2l6ZVRvVHdlZW4sICJcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICIpOwogICAgICAgIHZhciBrZXlmcmFtZXNGcm9tID0gb3B0aW9ucy5oaWRlRnJvbUNsb25lID09PSB0cnVlIHx8IGVsU2hhcmVkU2l6ZSA9PT0gdHJ1ZSA/ICcnIDogIlxuICAgICAgICAgICAgQGtleWZyYW1lcyAiLmNvbmNhdChxQW5pbUlkLCAiLWZyb20ge1xuICAgICAgICAgICAgICAwJSB7XG4gICAgICAgICAgICAgICAgbWFyZ2luOiAiKS5jb25jYXQoZWxGcm9tUGFyZW50SGVpZ2h0RGlmZiA8IDAgPyBlbEZyb21QYXJlbnRIZWlnaHREaWZmIC8gMiA6IDAsICJweCAiKS5jb25jYXQoZWxGcm9tUGFyZW50V2lkdGhEaWZmIDwgMCA/IGVsRnJvbVBhcmVudFdpZHRoRGlmZiAvIDIgOiAwLCAicHg7XG4gICAgICAgICAgICAgICAgd2lkdGg6ICIpLmNvbmNhdChlbEZyb21DbG9uZVdpZHRoICsgZWxGcm9tUG9zaXRpb24ubWFyZ2luSCwgInB4O1xuICAgICAgICAgICAgICAgIGhlaWdodDogIikuY29uY2F0KGVsRnJvbUNsb25lSGVpZ2h0ICsgZWxGcm9tUG9zaXRpb24ubWFyZ2luViwgInB4O1xuICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgMTAwJSB7XG4gICAgICAgICAgICAgICAgbWFyZ2luOiAwO1xuICAgICAgICAgICAgICAgIHdpZHRoOiAwO1xuICAgICAgICAgICAgICAgIGhlaWdodDogMDtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICIpOwogICAgICAgIHZhciBrZXlmcmFtZVRvU3RhcnQgPSBlbFNoYXJlZFNpemUgPT09IHRydWUgPyAiXG4gICAgICAgICAgICBtYXJnaW46ICIuY29uY2F0KGVsRnJvbVBhcmVudEhlaWdodERpZmYgPCAwID8gZWxGcm9tUGFyZW50SGVpZ2h0RGlmZiAvIDIgOiAwLCAicHggIikuY29uY2F0KGVsRnJvbVBhcmVudFdpZHRoRGlmZiA8IDAgPyBlbEZyb21QYXJlbnRXaWR0aERpZmYgLyAyIDogMCwgInB4O1xuICAgICAgICAgICAgd2lkdGg6ICIpLmNvbmNhdChlbEZyb21DbG9uZVdpZHRoICsgZWxGcm9tUG9zaXRpb24ubWFyZ2luSCwgInB4O1xuICAgICAgICAgICAgaGVpZ2h0OiAiKS5jb25jYXQoZWxGcm9tQ2xvbmVIZWlnaHQgKyBlbEZyb21Qb3NpdGlvbi5tYXJnaW5WLCAicHg7XG4gICAgICAgICAgIikgOiAiXG4gICAgICAgICAgICBtYXJnaW46IDA7XG4gICAgICAgICAgICB3aWR0aDogMDtcbiAgICAgICAgICAgIGhlaWdodDogMDtcbiAgICAgICAgICAiOwogICAgICAgIHZhciBrZXlmcmFtZXNUbyA9IG9wdGlvbnMua2VlcFRvQ2xvbmUgPT09IHRydWUgPyAnJyA6ICJcbiAgICAgICAgICAgIEBrZXlmcmFtZXMgIi5jb25jYXQocUFuaW1JZCwgIi10byB7XG4gICAgICAgICAgICAgIDAlIHtcbiAgICAgICAgICAgICAgICAiKS5jb25jYXQoa2V5ZnJhbWVUb1N0YXJ0LCAiXG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAxMDAlIHtcbiAgICAgICAgICAgICAgICBtYXJnaW46ICIpLmNvbmNhdChlbFRvUGFyZW50SGVpZ2h0RGlmZiA8IDAgPyBlbFRvUGFyZW50SGVpZ2h0RGlmZiAvIDIgOiAwLCAicHggIikuY29uY2F0KGVsVG9QYXJlbnRXaWR0aERpZmYgPCAwID8gZWxUb1BhcmVudFdpZHRoRGlmZiAvIDIgOiAwLCAicHg7XG4gICAgICAgICAgICAgICAgd2lkdGg6ICIpLmNvbmNhdChlbFRvQ2xvbmVXaWR0aCArIGVsVG9Qb3NpdGlvbi5tYXJnaW5ILCAicHg7XG4gICAgICAgICAgICAgICAgaGVpZ2h0OiAiKS5jb25jYXQoZWxUb0Nsb25lSGVpZ2h0ICsgZWxUb1Bvc2l0aW9uLm1hcmdpblYsICJweDtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICIpOwogICAgICAgIHN0eWxlLmlubmVySFRNTCA9ICJcbiAgICAgICAgICBAa2V5ZnJhbWVzICIuY29uY2F0KHFBbmltSWQsICIge1xuICAgICAgICAgICAgMCUge1xuICAgICAgICAgICAgICBtYXJnaW46IDA7XG4gICAgICAgICAgICAgIGJvcmRlci13aWR0aDogIikuY29uY2F0KGVsRnJvbUJvcmRlcldpZHRoLCAiO1xuICAgICAgICAgICAgICBib3JkZXItc3R5bGU6ICIpLmNvbmNhdChlbEZyb21Cb3JkZXJTdHlsZSwgIjtcbiAgICAgICAgICAgICAgYm9yZGVyLWNvbG9yOiAiKS5jb25jYXQoZWxGcm9tQm9yZGVyQ29sb3IsICI7XG4gICAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6ICIpLmNvbmNhdChlbEZyb21Cb3JkZXJSYWRpdXMsICI7XG4gICAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6ICIpLmNvbmNhdChlbEZyb21CYWNrZ3JvdW5kLCAiO1xuICAgICAgICAgICAgICB6LWluZGV4OiAiKS5jb25jYXQoZWxGcm9tWkluZGV4LCAiO1xuICAgICAgICAgICAgICB0cmFuc2Zvcm0tb3JpZ2luOiAwIDA7XG4gICAgICAgICAgICAgICIpLmNvbmNhdChfcmVzaXplRnJvbSwgIlxuICAgICAgICAgICAgICAiKS5jb25jYXQoX3R3ZWVuRnJvbSwgIlxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAxMDAlIHtcbiAgICAgICAgICAgICAgbWFyZ2luOiAwO1xuICAgICAgICAgICAgICBib3JkZXItd2lkdGg6ICIpLmNvbmNhdChlbFRvQm9yZGVyV2lkdGgsICI7XG4gICAgICAgICAgICAgIGJvcmRlci1zdHlsZTogIikuY29uY2F0KGVsVG9Cb3JkZXJTdHlsZSwgIjtcbiAgICAgICAgICAgICAgYm9yZGVyLWNvbG9yOiAiKS5jb25jYXQoZWxUb0JvcmRlckNvbG9yLCAiO1xuICAgICAgICAgICAgICBib3JkZXItcmFkaXVzOiAiKS5jb25jYXQoZWxUb0JvcmRlclJhZGl1cywgIjtcbiAgICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogIikuY29uY2F0KGVsVG9CYWNrZ3JvdW5kLCAiO1xuICAgICAgICAgICAgICB6LWluZGV4OiAiKS5jb25jYXQoZWxUb1pJbmRleCwgIjtcbiAgICAgICAgICAgICAgdHJhbnNmb3JtLW9yaWdpbjogMCAwO1xuICAgICAgICAgICAgICB0cmFuc2Zvcm06ICIpLmNvbmNhdChlbFRvVHJhbnNmb3JtLCAiO1xuICAgICAgICAgICAgICAiKS5jb25jYXQoX3Jlc2l6ZVRvLCAiXG4gICAgICAgICAgICAgICIpLmNvbmNhdChfdHdlZW5UbywgIlxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cblxuICAgICAgICAgICIpLmNvbmNhdChrZXlmcmFtZXNGcm9tLCAiXG5cbiAgICAgICAgICAiKS5jb25jYXQoa2V5ZnJhbWVzRnJvbVR3ZWVuLCAiXG5cbiAgICAgICAgICAiKS5jb25jYXQoa2V5ZnJhbWVzVG8sICJcbiAgICAgICAgIik7CiAgICAgICAgZG9jdW1lbnQuaGVhZC5hcHBlbmRDaGlsZChzdHlsZSk7CiAgICAgICAgdmFyIGFuaW1hdGlvbkRpcmVjdGlvbiA9ICdub3JtYWwnOwogICAgICAgIGVsRnJvbUNsb25lLnN0eWxlLmFuaW1hdGlvbiA9ICIiLmNvbmNhdChvcHRpb25zLmR1cmF0aW9uLCAibXMgIikuY29uY2F0KG9wdGlvbnMuZWFzaW5nLCAiICIpLmNvbmNhdChvcHRpb25zLmRlbGF5LCAibXMgIikuY29uY2F0KGFuaW1hdGlvbkRpcmVjdGlvbiwgIiAiKS5jb25jYXQob3B0aW9ucy5maWxsLCAiICIpLmNvbmNhdChxQW5pbUlkLCAiLWZyb20iKTsKCiAgICAgICAgaWYgKGVsRnJvbVR3ZWVuICE9PSB2b2lkIDApIHsKICAgICAgICAgIGVsRnJvbVR3ZWVuLnN0eWxlLmFuaW1hdGlvbiA9ICIiLmNvbmNhdChvcHRpb25zLmR1cmF0aW9uLCAibXMgIikuY29uY2F0KG9wdGlvbnMuZWFzaW5nLCAiICIpLmNvbmNhdChvcHRpb25zLmRlbGF5LCAibXMgIikuY29uY2F0KGFuaW1hdGlvbkRpcmVjdGlvbiwgIiAiKS5jb25jYXQob3B0aW9ucy5maWxsLCAiICIpLmNvbmNhdChxQW5pbUlkLCAiLWZyb20tdHdlZW4iKTsKICAgICAgICB9CgogICAgICAgIGVsVG9DbG9uZS5zdHlsZS5hbmltYXRpb24gPSAiIi5jb25jYXQob3B0aW9ucy5kdXJhdGlvbiwgIm1zICIpLmNvbmNhdChvcHRpb25zLmVhc2luZywgIiAiKS5jb25jYXQob3B0aW9ucy5kZWxheSwgIm1zICIpLmNvbmNhdChhbmltYXRpb25EaXJlY3Rpb24sICIgIikuY29uY2F0KG9wdGlvbnMuZmlsbCwgIiAiKS5jb25jYXQocUFuaW1JZCwgIi10byIpOwogICAgICAgIGVsVG8uc3R5bGUuYW5pbWF0aW9uID0gIiIuY29uY2F0KG9wdGlvbnMuZHVyYXRpb24sICJtcyAiKS5jb25jYXQob3B0aW9ucy5lYXNpbmcsICIgIikuY29uY2F0KG9wdGlvbnMuZGVsYXksICJtcyAiKS5jb25jYXQoYW5pbWF0aW9uRGlyZWN0aW9uLCAiICIpLmNvbmNhdChvcHRpb25zLmZpbGwsICIgIikuY29uY2F0KHFBbmltSWQpOwoKICAgICAgICB2YXIgX2NsZWFudXAgPSBmdW5jdGlvbiBfY2xlYW51cChldnQpIHsKICAgICAgICAgIGlmIChldnQgPT09IE9iamVjdChldnQpICYmIGV2dC5hbmltYXRpb25OYW1lICE9PSBxQW5pbUlkKSB7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgIH0KCiAgICAgICAgICBlbFRvLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2FuaW1hdGlvbmVuZCcsIF9jbGVhbnVwKTsKICAgICAgICAgIGVsVG8ucmVtb3ZlRXZlbnRMaXN0ZW5lcignYW5pbWF0aW9uY2FuY2VsJywgX2NsZWFudXApOwogICAgICAgICAgY29tbW9uQ2xlYW51cCgpOyAvLyB3ZSBjbGVhbiB0aGUgYW5pbWF0aW9ucwoKICAgICAgICAgIHN0eWxlLnJlbW92ZSgpOwogICAgICAgIH07CgogICAgICAgIGVsRnJvbS5xTW9ycGhDYW5jZWwgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICBlbEZyb20ucU1vcnBoQ2FuY2VsID0gdm9pZCAwOwogICAgICAgICAgY2FuY2VsU3RhdHVzID0gdHJ1ZTsKCiAgICAgICAgICBfY2xlYW51cCgpOwogICAgICAgIH07CgogICAgICAgIGVsVG8ucU1vcnBoQ2FuY2VsID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgZWxUby5xTW9ycGhDYW5jZWwgPSB2b2lkIDA7CiAgICAgICAgICBjYW5jZWxTdGF0dXMgPSB0cnVlOwoKICAgICAgICAgIF9jbGVhbnVwKCk7CiAgICAgICAgfTsKCiAgICAgICAgZWxUby5hZGRFdmVudExpc3RlbmVyKCdhbmltYXRpb25lbmQnLCBfY2xlYW51cCk7CiAgICAgICAgZWxUby5hZGRFdmVudExpc3RlbmVyKCdhbmltYXRpb25jYW5jZWwnLCBfY2xlYW51cCk7CgogICAgICAgIGNhbmNlbCA9IGZ1bmN0aW9uIGNhbmNlbChhYm9ydCkgewogICAgICAgICAgLy8gd2UgYXJlIG5vdCBpbiBhIG1vcnBoIHRoYXQgd2UgY2FuIGNhbmNlbAogICAgICAgICAgaWYgKGNhbmNlbFN0YXR1cyA9PT0gdHJ1ZSB8fCAhZWxUbyB8fCAhZWxGcm9tQ2xvbmUgfHwgIWVsVG9DbG9uZSkgewogICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgICB9CgogICAgICAgICAgaWYgKGFib3J0ID09PSB0cnVlKSB7CiAgICAgICAgICAgIF9jbGVhbnVwKCk7CgogICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICAgIH0KCiAgICAgICAgICBlbmRFbGVtZW50VG8gPSBlbmRFbGVtZW50VG8gIT09IHRydWU7CiAgICAgICAgICBhbmltYXRpb25EaXJlY3Rpb24gPSBhbmltYXRpb25EaXJlY3Rpb24gPT09ICdub3JtYWwnID8gJ3JldmVyc2UnIDogJ25vcm1hbCc7CiAgICAgICAgICBlbEZyb21DbG9uZS5zdHlsZS5hbmltYXRpb25EaXJlY3Rpb24gPSBhbmltYXRpb25EaXJlY3Rpb247CiAgICAgICAgICBlbEZyb21Ud2Vlbi5zdHlsZS5hbmltYXRpb25EaXJlY3Rpb24gPSBhbmltYXRpb25EaXJlY3Rpb247CiAgICAgICAgICBlbFRvQ2xvbmUuc3R5bGUuYW5pbWF0aW9uRGlyZWN0aW9uID0gYW5pbWF0aW9uRGlyZWN0aW9uOwogICAgICAgICAgZWxUby5zdHlsZS5hbmltYXRpb25EaXJlY3Rpb24gPSBhbmltYXRpb25EaXJlY3Rpb247CiAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICB9OwogICAgICB9CiAgICB9OwoKICAgIGlmIChvcHRpb25zLndhaXRGb3IgPiAwIHx8IG9wdGlvbnMud2FpdEZvciA9PT0gJ3RyYW5zaXRpb25lbmQnIHx8IG9wdGlvbnMud2FpdEZvciA9PT0gT2JqZWN0KG9wdGlvbnMud2FpdEZvcikgJiYgdHlwZW9mIG9wdGlvbnMud2FpdEZvci50aGVuID09PSAnZnVuY3Rpb24nKSB7CiAgICAgIHZhciBkZWxheVByb21pc2UgPSBvcHRpb25zLndhaXRGb3IgPiAwID8gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUpIHsKICAgICAgICByZXR1cm4gc2V0VGltZW91dChyZXNvbHZlLCBvcHRpb25zLndhaXRGb3IpOwogICAgICB9KSA6IG9wdGlvbnMud2FpdEZvciA9PT0gJ3RyYW5zaXRpb25lbmQnID8gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUpIHsKICAgICAgICB2YXIgdGltZXIgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICAgIGVuZEZuKCk7CiAgICAgICAgfSwgNDAwKTsKCiAgICAgICAgdmFyIGVuZEZuID0gZnVuY3Rpb24gZW5kRm4oZXYpIHsKICAgICAgICAgIGNsZWFyVGltZW91dCh0aW1lcik7CgogICAgICAgICAgaWYgKGVsVG8pIHsKICAgICAgICAgICAgZWxUby5yZW1vdmVFdmVudExpc3RlbmVyKCd0cmFuc2l0aW9uZW5kJywgZW5kRm4pOwogICAgICAgICAgICBlbFRvLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3RyYW5zaXRpb25jYW5jZWwnLCBlbmRGbik7CiAgICAgICAgICB9CgogICAgICAgICAgcmVzb2x2ZSgpOwogICAgICAgIH07CgogICAgICAgIGVsVG8uYWRkRXZlbnRMaXN0ZW5lcigndHJhbnNpdGlvbmVuZCcsIGVuZEZuKTsKICAgICAgICBlbFRvLmFkZEV2ZW50TGlzdGVuZXIoJ3RyYW5zaXRpb25jYW5jZWwnLCBlbmRGbik7CiAgICAgIH0pIDogb3B0aW9ucy53YWl0Rm9yOwogICAgICBkZWxheVByb21pc2UudGhlbihhbmltYXRlKVsiY2F0Y2giXShmdW5jdGlvbiAoKSB7CiAgICAgICAgdHlwZW9mIGVsVG8ucU1vcnBoQ2FuY2VsID09PSAnZnVuY3Rpb24nICYmIGVsVG8ucU1vcnBoQ2FuY2VsKCk7CiAgICAgIH0pOwogICAgfSBlbHNlIHsKICAgICAgYW5pbWF0ZSgpOwogICAgfQogIH07CgogIHR5cGVvZiBfb3B0aW9ucy5vblRvZ2dsZSA9PT0gJ2Z1bmN0aW9uJyAmJiBfb3B0aW9ucy5vblRvZ2dsZSgpOwogIHJlcXVlc3RBbmltYXRpb25GcmFtZShjYWxjdWxhdGVGaW5hbFN0YXRlKTsgLy8gd2UgcmV0dXJuIHRoZSBjYW5jZWwgZnVuY3Rpb24KICAvLyByZXR1cm5zOgogIC8vICAgZmFsc2UgaWYgdGhlIGNhbmNlbCBjYW5ub3QgYmUgcGVyZm9ybWVkICh0aGUgbW9ycGggZW5kZWQgYWxyZWFkeSBvciBoYXMgbm90IHN0YXJ0ZWQpCiAgLy8gICB0cnVlIGVsc2UKCiAgcmV0dXJuIGZ1bmN0aW9uIChhYm9ydCkgewogICAgcmV0dXJuIGNhbmNlbChhYm9ydCk7CiAgfTsKfQ=="},{"version":3,"sources":["/home/netsuretsu/Rendu/Epitech-pulse-test/Part five/front-reservation-parking/node_modules/quasar/src/utils/morph.js"],"names":["isPlainObject","id","offsetBase","getAbsolutePosition","el","resize","document","createElement","style","cssText","body","appendChild","boundingRect","getBoundingClientRect","baseRect","window","getComputedStyle","marginLeft","marginRight","marginTop","marginBottom","marginH","parseInt","marginV","left","top","width","right","height","bottom","widthM","heightM","getAbsoluteSize","scrollWidth","scrollHeight","styleEdges","styleBorderRadiuses","reStyleSkipKey","reStyleSkipRule","props","fixed","i","length","prop","styleLen","val","test","indexOf","suffix","replace","j","subProp","val1","val2","split","filter","join","zIndexPositions","getMaxZIndex","elStart","maxIndex","position","zIndex","zIndexNum","Number","includes","parentNode","normalizeElements","opts","from","to","normalizeOptions","options","duration","onEnd","waitFor","isNaN","easing","delay","fill","useCSS","hideFromClone","keepToClone","tween","tweenFromOpacity","parseFloat","tweenToOpacity","getElement","element","type","querySelector","isValidElement","ownerDocument","morph","_options","cancel","cancelStatus","endElementTo","elements","elFrom","qMorphCancel","animationFromClone","animationFromTween","animationToClone","animationTo","elFromParent","elFromNext","nextElementSibling","elFromPosition","elFromParentWidthBefore","elFromParentHeightBefore","elFromBorderWidth","borderWidth","elFromBorderStyle","borderStyle","elFromBorderColor","borderColor","elFromBorderRadius","borderRadius","elFromBackground","backgroundColor","elFromTransform","transform","elFromPositioningType","elFromCssText","elFromClassSaved","classList","toString","elFromStyleSaved","elFromClone","cloneNode","elFromTween","className","c","add","setAttribute","transition","animation","pointerEvents","insertBefore","remove","calculateFinalState","elTo","elFromParentWidthAfter","elFromParentHeightAfter","elToParentWidthBefore","elToParentHeightBefore","animate","innerHTML","elToParent","elToParentWidthAfter","elToParentHeightAfter","elToClone","elToNext","elToBorderWidth","elToBorderStyle","elToBorderColor","elToBorderRadius","elToBackground","elToTransform","elToPositioningType","elToCssText","elToClassSaved","elToStyleSaved","elToPosition","deltaX","deltaY","scaleX","scaleY","elFromParentWidthDiff","elFromParentHeightDiff","elToParentWidthDiff","elToParentHeightDiff","elFromCloneWidth","Math","max","elFromCloneHeight","elToCloneWidth","elToCloneHeight","elSharedSize","elToNeedsFixedPosition","parent","display","flex","opacity","minWidth","maxWidth","minHeight","maxHeight","classes","elFromZIndex","elToZIndex","documentScroll","documentElement","scrollLeft","scrollTop","margin","overflow","overflowX","overflowY","commonCleanup","aborted","resizeFrom","resizeTo","resizeFromTween","resizeToTween","tweenFrom","tweenTo","transformOrigin","cleanup","abort","removeEventListener","addEventListener","reverse","qAnimId","keyframesFromTween","keyframesFrom","keyframeToStart","keyframesTo","head","animationDirection","evt","Object","animationName","then","delayPromise","Promise","resolve","setTimeout","timer","endFn","ev","clearTimeout","onToggle","requestAnimationFrame"],"mappings":"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","sourcesContent":["import { isPlainObject } from './private/is'\n\nlet id = 0\nlet offsetBase = void 0\n\nfunction getAbsolutePosition (el, resize) {\n  if (offsetBase === void 0) {\n    offsetBase = document.createElement('div')\n    offsetBase.style.cssText = 'position: absolute; left: 0; top: 0'\n    document.body.appendChild(offsetBase)\n  }\n\n  const boundingRect = el.getBoundingClientRect()\n  const baseRect = offsetBase.getBoundingClientRect()\n  const { marginLeft, marginRight, marginTop, marginBottom } = window.getComputedStyle(el)\n  const marginH = parseInt(marginLeft, 10) + parseInt(marginRight, 10)\n  const marginV = parseInt(marginTop, 10) + parseInt(marginBottom, 10)\n\n  return {\n    left: boundingRect.left - baseRect.left,\n    top: boundingRect.top - baseRect.top,\n    width: boundingRect.right - boundingRect.left,\n    height: boundingRect.bottom - boundingRect.top,\n    widthM: boundingRect.right - boundingRect.left + (resize === true ? 0 : marginH),\n    heightM: boundingRect.bottom - boundingRect.top + (resize === true ? 0 : marginV),\n    marginH: resize === true ? marginH : 0,\n    marginV: resize === true ? marginV : 0\n  }\n}\n\nfunction getAbsoluteSize (el) {\n  return {\n    width: el.scrollWidth,\n    height: el.scrollHeight\n  }\n}\n\n// firefox rulez\nconst styleEdges = [ 'Top', 'Right', 'Bottom', 'Left' ]\nconst styleBorderRadiuses = [ 'borderTopLeftRadius', 'borderTopRightRadius', 'borderBottomRightRadius', 'borderBottomLeftRadius' ]\nconst reStyleSkipKey = /-block|-inline|block-|inline-/\nconst reStyleSkipRule = /(-block|-inline|block-|inline-).*:/\n\nfunction getComputedStyle (el, props) {\n  const style = window.getComputedStyle(el)\n  const fixed = {}\n  for (let i = 0; i < props.length; i++) {\n    const prop = props[ i ]\n\n    if (style[ prop ] === '') {\n      if (prop === 'cssText') {\n        const styleLen = style.length\n        let val = ''\n\n        for (let i = 0; i < styleLen; i++) {\n          if (reStyleSkipKey.test(style[ i ]) !== true) {\n            val += style[ i ] + ': ' + style[ style[ i ] ] + '; '\n          }\n        }\n\n        fixed[ prop ] = val\n      }\n      else if ([ 'borderWidth', 'borderStyle', 'borderColor' ].indexOf(prop) > -1) {\n        const suffix = prop.replace('border', '')\n        let val = ''\n        for (let j = 0; j < styleEdges.length; j++) {\n          const subProp = 'border' + styleEdges[ j ] + suffix\n          val += style[ subProp ] + ' '\n        }\n        fixed[ prop ] = val\n      }\n      else if (prop === 'borderRadius') {\n        let val1 = ''\n        let val2 = ''\n        for (let j = 0; j < styleBorderRadiuses.length; j++) {\n          const val = style[ styleBorderRadiuses[ j ] ].split(' ')\n          val1 += val[ 0 ] + ' '\n          val2 += (val[ 1 ] === void 0 ? val[ 0 ] : val[ 1 ]) + ' '\n        }\n        fixed[ prop ] = val1 + '/ ' + val2\n      }\n      else {\n        fixed[ prop ] = style[ prop ]\n      }\n    }\n    else {\n      if (prop === 'cssText') {\n        fixed[ prop ] = style[ prop ]\n          .split(';')\n          .filter(val => reStyleSkipRule.test(val) !== true)\n          .join(';')\n      }\n      else {\n        fixed[ prop ] = style[ prop ]\n      }\n    }\n  }\n\n  return fixed\n}\n\nconst zIndexPositions = [ 'absolute', 'fixed', 'relative', 'sticky' ]\n\nfunction getMaxZIndex (elStart) {\n  let el = elStart\n  let maxIndex = 0\n\n  while (el !== null && el !== document) {\n    const { position, zIndex } = window.getComputedStyle(el)\n    const zIndexNum = Number(zIndex)\n\n    if (\n      zIndexNum > maxIndex\n      && (el === elStart || zIndexPositions.includes(position) === true)\n    ) {\n      maxIndex = zIndexNum\n    }\n\n    el = el.parentNode\n  }\n\n  return maxIndex\n}\n\nfunction normalizeElements (opts) {\n  return {\n    from: opts.from,\n    to: opts.to !== void 0\n      ? opts.to\n      : opts.from\n  }\n}\n\nfunction normalizeOptions (options) {\n  if (typeof options === 'number') {\n    options = {\n      duration: options\n    }\n  }\n  else if (typeof options === 'function') {\n    options = {\n      onEnd: options\n    }\n  }\n\n  return {\n    ...options,\n\n    waitFor: options.waitFor === void 0 ? 0 : options.waitFor,\n\n    duration: isNaN(options.duration) === true ? 300 : parseInt(options.duration, 10),\n    easing: typeof options.easing === 'string' && options.easing.length > 0 ? options.easing : 'ease-in-out',\n    delay: isNaN(options.delay) === true ? 0 : parseInt(options.delay, 10),\n    fill: typeof options.fill === 'string' && options.fill.length > 0 ? options.fill : 'none',\n\n    resize: options.resize === true,\n    useCSS: options.useCSS === true,\n    hideFromClone: options.hideFromClone === true,\n    keepToClone: options.keepToClone === true,\n\n    tween: options.tween === true,\n    tweenFromOpacity: isNaN(options.tweenFromOpacity) === true ? 0.6 : parseFloat(options.tweenFromOpacity),\n    tweenToOpacity: isNaN(options.tweenToOpacity) === true ? 0.5 : parseFloat(options.tweenToOpacity)\n  }\n}\n\nfunction getElement (element) {\n  const type = typeof element\n\n  return type === 'function'\n    ? element()\n    : (\n        type === 'string'\n          ? document.querySelector(element)\n          : element\n      )\n}\n\nfunction isValidElement (element) {\n  return element\n    && element.ownerDocument === document\n    && element.parentNode !== null\n}\n\nexport default function morph (_options) {\n  let cancel = () => false\n  let cancelStatus = false\n  let endElementTo = true\n\n  const elements = normalizeElements(_options)\n  const options = normalizeOptions(_options)\n\n  const elFrom = getElement(elements.from)\n  if (isValidElement(elFrom) !== true) {\n    // we return a cancel function that return false, meaning the cancel function failed\n    return cancel\n  }\n  // we clean other morphs running on this element\n  typeof elFrom.qMorphCancel === 'function' && elFrom.qMorphCancel()\n\n  let animationFromClone = void 0\n  let animationFromTween = void 0\n  let animationToClone = void 0\n  let animationTo = void 0\n\n  const elFromParent = elFrom.parentNode\n  const elFromNext = elFrom.nextElementSibling\n\n  // we get the dimensions and characteristics\n  // of the parent of the initial element before changes\n  const elFromPosition = getAbsolutePosition(elFrom, options.resize)\n  const {\n    width: elFromParentWidthBefore,\n    height: elFromParentHeightBefore\n  } = getAbsoluteSize(elFromParent)\n  const {\n    borderWidth: elFromBorderWidth,\n    borderStyle: elFromBorderStyle,\n    borderColor: elFromBorderColor,\n    borderRadius: elFromBorderRadius,\n    backgroundColor: elFromBackground,\n    transform: elFromTransform,\n    position: elFromPositioningType,\n    cssText: elFromCssText\n  } = getComputedStyle(elFrom, [ 'borderWidth', 'borderStyle', 'borderColor', 'borderRadius', 'backgroundColor', 'transform', 'position', 'cssText' ])\n  const elFromClassSaved = elFrom.classList.toString()\n  const elFromStyleSaved = elFrom.style.cssText\n\n  // we make a clone of the initial element and\n  // use it to display until the final element is ready\n  // and to change the occupied space during animation\n  const elFromClone = elFrom.cloneNode(true)\n  const elFromTween = options.tween === true ? elFrom.cloneNode(true) : void 0\n\n  if (elFromTween !== void 0) {\n    elFromTween.className = elFromTween.classList.toString().split(' ').filter(c => /^bg-/.test(c) === false).join(' ')\n  }\n\n  // if the initial element is not going to be removed do not show the placeholder\n  options.hideFromClone === true && elFromClone.classList.add('q-morph--internal')\n\n  // prevent interaction with placeholder\n  elFromClone.setAttribute('aria-hidden', 'true')\n  elFromClone.style.transition = 'none'\n  elFromClone.style.animation = 'none'\n  elFromClone.style.pointerEvents = 'none'\n  elFromParent.insertBefore(elFromClone, elFromNext)\n\n  // we mark the element with its cleanup function\n  elFrom.qMorphCancel = () => {\n    cancelStatus = true\n\n    // we clean the clone of the initial element\n    elFromClone.remove()\n    elFromTween !== void 0 && elFromTween.remove()\n\n    options.hideFromClone === true && elFromClone.classList.remove('q-morph--internal')\n\n    // we remove the cleanup function from the element\n    elFrom.qMorphCancel = void 0\n  }\n\n  // will be called after Vue catches up with the changes done by _options.onToggle() function\n  const calculateFinalState = () => {\n    const elTo = getElement(elements.to)\n    if (cancelStatus === true || isValidElement(elTo) !== true) {\n      typeof elFrom.qMorphCancel === 'function' && elFrom.qMorphCancel()\n\n      return\n    }\n    // we clean other morphs running on this element\n    elFrom !== elTo && typeof elTo.qMorphCancel === 'function' && elTo.qMorphCancel()\n\n    // we hide the final element and the clone of the initial element\n    // we don't hide the final element if we want both it and the animated one visible\n    options.keepToClone !== true && elTo.classList.add('q-morph--internal')\n    elFromClone.classList.add('q-morph--internal')\n\n    // we get the dimensions of the parent of the initial element after changes\n    // the difference is how much we should animate the clone\n    const {\n      width: elFromParentWidthAfter,\n      height: elFromParentHeightAfter\n    } = getAbsoluteSize(elFromParent)\n\n    // we get the dimensions of the parent of the final element before changes\n    const {\n      width: elToParentWidthBefore,\n      height: elToParentHeightBefore\n    } = getAbsoluteSize(elTo.parentNode)\n\n    // then we show the clone of the initial element if we don't want it hidden\n    options.hideFromClone !== true && elFromClone.classList.remove('q-morph--internal')\n\n    // we mark the element with its cleanup function\n    elTo.qMorphCancel = () => {\n      cancelStatus = true\n\n      // we clean the clone of the initial element\n      elFromClone.remove()\n      elFromTween !== void 0 && elFromTween.remove()\n\n      options.hideFromClone === true && elFromClone.classList.remove('q-morph--internal')\n\n      // we show the final element\n      options.keepToClone !== true && elTo.classList.remove('q-morph--internal')\n\n      // we remove the cleanup function from the elements\n      elFrom.qMorphCancel = void 0\n      elTo.qMorphCancel = void 0\n    }\n\n    // will be called after waitFor (give time to render the final element)\n    const animate = () => {\n      if (cancelStatus === true) {\n        typeof elTo.qMorphCancel === 'function' && elTo.qMorphCancel()\n\n        return\n      }\n\n      // now the animation starts, so we only need the clone\n      // of the initial element as a spacer\n      // we also hide it to calculate the dimensions of the\n      // parent of the final element after the changes\n      if (options.hideFromClone !== true) {\n        elFromClone.classList.add('q-morph--internal')\n        elFromClone.innerHTML = ''\n        elFromClone.style.left = 0\n        elFromClone.style.right = 'unset'\n        elFromClone.style.top = 0\n        elFromClone.style.bottom = 'unset'\n        elFromClone.style.transform = 'none'\n      }\n\n      // we show the final element\n      if (options.keepToClone !== true) {\n        elTo.classList.remove('q-morph--internal')\n      }\n\n      // we get the dimensions of the parent of the final element after changes\n      // the difference is how much we should animate the clone\n      const elToParent = elTo.parentNode\n      const {\n        width: elToParentWidthAfter,\n        height: elToParentHeightAfter\n      } = getAbsoluteSize(elToParent)\n\n      const elToClone = elTo.cloneNode(options.keepToClone)\n      elToClone.setAttribute('aria-hidden', 'true')\n      if (options.keepToClone !== true) {\n        elToClone.style.left = 0\n        elToClone.style.right = 'unset'\n        elToClone.style.top = 0\n        elToClone.style.bottom = 'unset'\n        elToClone.style.transform = 'none'\n        elToClone.style.pointerEvents = 'none'\n      }\n      elToClone.classList.add('q-morph--internal')\n\n      // if elFrom is the same as elTo the next element is elFromClone\n      const elToNext = elTo === elFrom && elFromParent === elToParent ? elFromClone : elTo.nextElementSibling\n      elToParent.insertBefore(elToClone, elToNext)\n\n      const {\n        borderWidth: elToBorderWidth,\n        borderStyle: elToBorderStyle,\n        borderColor: elToBorderColor,\n        borderRadius: elToBorderRadius,\n        backgroundColor: elToBackground,\n        transform: elToTransform,\n        position: elToPositioningType,\n        cssText: elToCssText\n      } = getComputedStyle(elTo, [ 'borderWidth', 'borderStyle', 'borderColor', 'borderRadius', 'backgroundColor', 'transform', 'position', 'cssText' ])\n      const elToClassSaved = elTo.classList.toString()\n      const elToStyleSaved = elTo.style.cssText\n\n      // we set the computed styles on the element (to be able to remove classes)\n      elTo.style.cssText = elToCssText\n      elTo.style.transform = 'none'\n      elTo.style.animation = 'none'\n      elTo.style.transition = 'none'\n      // we strip the background classes (background color can no longer be animated if !important is used)\n      elTo.className = elToClassSaved.split(' ').filter(c => /^bg-/.test(c) === false).join(' ')\n\n      const elToPosition = getAbsolutePosition(elTo, options.resize)\n\n      const deltaX = elFromPosition.left - elToPosition.left\n      const deltaY = elFromPosition.top - elToPosition.top\n      const scaleX = elFromPosition.width / (elToPosition.width > 0 ? elToPosition.width : 10)\n      const scaleY = elFromPosition.height / (elToPosition.height > 0 ? elToPosition.height : 100)\n\n      const elFromParentWidthDiff = elFromParentWidthBefore - elFromParentWidthAfter\n      const elFromParentHeightDiff = elFromParentHeightBefore - elFromParentHeightAfter\n      const elToParentWidthDiff = elToParentWidthAfter - elToParentWidthBefore\n      const elToParentHeightDiff = elToParentHeightAfter - elToParentHeightBefore\n\n      const elFromCloneWidth = Math.max(elFromPosition.widthM, elFromParentWidthDiff)\n      const elFromCloneHeight = Math.max(elFromPosition.heightM, elFromParentHeightDiff)\n      const elToCloneWidth = Math.max(elToPosition.widthM, elToParentWidthDiff)\n      const elToCloneHeight = Math.max(elToPosition.heightM, elToParentHeightDiff)\n\n      const elSharedSize = elFrom === elTo\n        && [ 'absolute', 'fixed' ].includes(elToPositioningType) === false\n        && [ 'absolute', 'fixed' ].includes(elFromPositioningType) === false\n\n      // if the final element has fixed position or if a parent\n      // has fixed position we need to animate it as fixed\n      let elToNeedsFixedPosition = elToPositioningType === 'fixed'\n      let parent = elToParent\n      while (elToNeedsFixedPosition !== true && parent !== document) {\n        elToNeedsFixedPosition = window.getComputedStyle(parent).position === 'fixed'\n        parent = parent.parentNode\n      }\n\n      // we show the spacer for the initial element\n      if (options.hideFromClone !== true) {\n        elFromClone.style.display = 'block'\n        elFromClone.style.flex = '0 0 auto'\n        elFromClone.style.opacity = 0\n        elFromClone.style.minWidth = 'unset'\n        elFromClone.style.maxWidth = 'unset'\n        elFromClone.style.minHeight = 'unset'\n        elFromClone.style.maxHeight = 'unset'\n        elFromClone.classList.remove('q-morph--internal')\n      }\n\n      // we show the spacer for the final element\n      if (options.keepToClone !== true) {\n        elToClone.style.display = 'block'\n        elToClone.style.flex = '0 0 auto'\n        elToClone.style.opacity = 0\n        elToClone.style.minWidth = 'unset'\n        elToClone.style.maxWidth = 'unset'\n        elToClone.style.minHeight = 'unset'\n        elToClone.style.maxHeight = 'unset'\n      }\n      elToClone.classList.remove('q-morph--internal')\n\n      // we apply classes specified by user\n      if (typeof options.classes === 'string') {\n        elTo.className += ' ' + options.classes\n      }\n\n      // we apply styles specified by user\n      if (typeof options.style === 'string') {\n        elTo.style.cssText += ' ' + options.style\n      }\n      else if (isPlainObject(options.style) === true) {\n        for (const prop in options.style) {\n          elTo.style[ prop ] = options.style[ prop ]\n        }\n      }\n\n      const elFromZIndex = getMaxZIndex(elFromClone)\n      const elToZIndex = getMaxZIndex(elTo)\n\n      // we position the morphing element\n      // if we use fixed position for the final element we need to adjust for scroll\n      const documentScroll = elToNeedsFixedPosition === true\n        ? document.documentElement\n        : { scrollLeft: 0, scrollTop: 0 }\n      elTo.style.position = elToNeedsFixedPosition === true ? 'fixed' : 'absolute'\n      elTo.style.left = `${ elToPosition.left - documentScroll.scrollLeft }px`\n      elTo.style.right = 'unset'\n      elTo.style.top = `${ elToPosition.top - documentScroll.scrollTop }px`\n      elTo.style.margin = 0\n\n      if (options.resize === true) {\n        elTo.style.minWidth = 'unset'\n        elTo.style.maxWidth = 'unset'\n        elTo.style.minHeight = 'unset'\n        elTo.style.maxHeight = 'unset'\n        elTo.style.overflow = 'hidden'\n        elTo.style.overflowX = 'hidden'\n        elTo.style.overflowY = 'hidden'\n      }\n\n      document.body.appendChild(elTo)\n\n      if (elFromTween !== void 0) {\n        elFromTween.style.cssText = elFromCssText\n        elFromTween.style.transform = 'none'\n        elFromTween.style.animation = 'none'\n        elFromTween.style.transition = 'none'\n\n        elFromTween.style.position = elTo.style.position\n        elFromTween.style.left = `${ elFromPosition.left - documentScroll.scrollLeft }px`\n        elFromTween.style.right = 'unset'\n        elFromTween.style.top = `${ elFromPosition.top - documentScroll.scrollTop }px`\n        elFromTween.style.margin = 0\n        elFromTween.style.pointerEvents = 'none'\n\n        if (options.resize === true) {\n          elFromTween.style.minWidth = 'unset'\n          elFromTween.style.maxWidth = 'unset'\n          elFromTween.style.minHeight = 'unset'\n          elFromTween.style.maxHeight = 'unset'\n          elFromTween.style.overflow = 'hidden'\n          elFromTween.style.overflowX = 'hidden'\n          elFromTween.style.overflowY = 'hidden'\n        }\n\n        document.body.appendChild(elFromTween)\n      }\n\n      const commonCleanup = aborted => {\n        // we put the element back in it's place\n        // and restore the styles and classes\n        if (elFrom === elTo && endElementTo !== true) {\n          elTo.style.cssText = elFromStyleSaved\n          elTo.className = elFromClassSaved\n        }\n        else {\n          elTo.style.cssText = elToStyleSaved\n          elTo.className = elToClassSaved\n        }\n        elToClone.parentNode === elToParent && elToParent.insertBefore(elTo, elToClone)\n\n        // we clean the spacers\n        elFromClone.remove()\n        elToClone.remove()\n        elFromTween !== void 0 && elFromTween.remove()\n\n        // cancel will be no longer available\n        cancel = () => false\n\n        elFrom.qMorphCancel = void 0\n        elTo.qMorphCancel = void 0\n\n        // we are ready\n        if (typeof options.onEnd === 'function') {\n          options.onEnd(endElementTo === true ? 'to' : 'from', aborted === true)\n        }\n      }\n\n      if (options.useCSS !== true && typeof elTo.animate === 'function') {\n        const resizeFrom = options.resize === true\n          ? {\n              transform: `translate(${ deltaX }px, ${ deltaY }px)`,\n              width: `${ elFromCloneWidth }px`,\n              height: `${ elFromCloneHeight }px`\n            }\n          : {\n              transform: `translate(${ deltaX }px, ${ deltaY }px) scale(${ scaleX }, ${ scaleY })`\n            }\n        const resizeTo = options.resize === true\n          ? {\n              width: `${ elToCloneWidth }px`,\n              height: `${ elToCloneHeight }px`\n            }\n          : {}\n        const resizeFromTween = options.resize === true\n          ? {\n              width: `${ elFromCloneWidth }px`,\n              height: `${ elFromCloneHeight }px`\n            }\n          : {}\n        const resizeToTween = options.resize === true\n          ? {\n              transform: `translate(${ -1 * deltaX }px, ${ -1 * deltaY }px)`,\n              width: `${ elToCloneWidth }px`,\n              height: `${ elToCloneHeight }px`\n            }\n          : {\n              transform: `translate(${ -1 * deltaX }px, ${ -1 * deltaY }px) scale(${ 1 / scaleX }, ${ 1 / scaleY })`\n            }\n        const tweenFrom = elFromTween !== void 0\n          ? { opacity: options.tweenToOpacity }\n          : { backgroundColor: elFromBackground }\n        const tweenTo = elFromTween !== void 0\n          ? { opacity: 1 }\n          : { backgroundColor: elToBackground }\n        animationTo = elTo.animate([\n          {\n            margin: 0,\n            borderWidth: elFromBorderWidth,\n            borderStyle: elFromBorderStyle,\n            borderColor: elFromBorderColor,\n            borderRadius: elFromBorderRadius,\n            zIndex: elFromZIndex,\n            transformOrigin: '0 0',\n            ...resizeFrom,\n            ...tweenFrom\n          },\n          {\n            margin: 0,\n            borderWidth: elToBorderWidth,\n            borderStyle: elToBorderStyle,\n            borderColor: elToBorderColor,\n            borderRadius: elToBorderRadius,\n            zIndex: elToZIndex,\n            transformOrigin: '0 0',\n            transform: elToTransform,\n            ...resizeTo,\n            ...tweenTo\n          }\n        ], {\n          duration: options.duration,\n          easing: options.easing,\n          fill: options.fill,\n          delay: options.delay\n        })\n\n        animationFromTween = elFromTween === void 0 ? void 0 : elFromTween.animate([\n          {\n            opacity: options.tweenFromOpacity,\n            margin: 0,\n            borderWidth: elFromBorderWidth,\n            borderStyle: elFromBorderStyle,\n            borderColor: elFromBorderColor,\n            borderRadius: elFromBorderRadius,\n            zIndex: elFromZIndex,\n            transformOrigin: '0 0',\n            transform: elFromTransform,\n            ...resizeFromTween\n          },\n          {\n            opacity: 0,\n            margin: 0,\n            borderWidth: elToBorderWidth,\n            borderStyle: elToBorderStyle,\n            borderColor: elToBorderColor,\n            borderRadius: elToBorderRadius,\n            zIndex: elToZIndex,\n            transformOrigin: '0 0',\n            ...resizeToTween\n          }\n        ], {\n          duration: options.duration,\n          easing: options.easing,\n          fill: options.fill,\n          delay: options.delay\n        })\n\n        animationFromClone = options.hideFromClone === true || elSharedSize === true ? void 0 : elFromClone.animate([\n          {\n            margin: `${ elFromParentHeightDiff < 0 ? elFromParentHeightDiff / 2 : 0 }px ${ elFromParentWidthDiff < 0 ? elFromParentWidthDiff / 2 : 0 }px`,\n            width: `${ elFromCloneWidth + elFromPosition.marginH }px`,\n            height: `${ elFromCloneHeight + elFromPosition.marginV }px`\n          },\n          {\n            margin: 0,\n            width: 0,\n            height: 0\n          }\n        ], {\n          duration: options.duration,\n          easing: options.easing,\n          fill: options.fill,\n          delay: options.delay\n        })\n\n        animationToClone = options.keepToClone === true ? void 0 : elToClone.animate([\n          elSharedSize === true\n            ? {\n                margin: `${ elFromParentHeightDiff < 0 ? elFromParentHeightDiff / 2 : 0 }px ${ elFromParentWidthDiff < 0 ? elFromParentWidthDiff / 2 : 0 }px`,\n                width: `${ elFromCloneWidth + elFromPosition.marginH }px`,\n                height: `${ elFromCloneHeight + elFromPosition.marginV }px`\n              }\n            : {\n                margin: 0,\n                width: 0,\n                height: 0\n              },\n          {\n            margin: `${ elToParentHeightDiff < 0 ? elToParentHeightDiff / 2 : 0 }px ${ elToParentWidthDiff < 0 ? elToParentWidthDiff / 2 : 0 }px`,\n            width: `${ elToCloneWidth + elToPosition.marginH }px`,\n            height: `${ elToCloneHeight + elToPosition.marginV }px`\n          }\n        ], {\n          duration: options.duration,\n          easing: options.easing,\n          fill: options.fill,\n          delay: options.delay\n        })\n\n        const cleanup = abort => {\n          animationFromClone !== void 0 && animationFromClone.cancel()\n          animationFromTween !== void 0 && animationFromTween.cancel()\n          animationToClone !== void 0 && animationToClone.cancel()\n          animationTo.cancel()\n\n          animationTo.removeEventListener('finish', cleanup)\n          animationTo.removeEventListener('cancel', cleanup)\n\n          commonCleanup(abort)\n\n          // we clean the animations\n          animationFromClone = void 0\n          animationFromTween = void 0\n          animationToClone = void 0\n          animationTo = void 0\n        }\n\n        elFrom.qMorphCancel = () => {\n          elFrom.qMorphCancel = void 0\n          cancelStatus = true\n          cleanup()\n        }\n        elTo.qMorphCancel = () => {\n          elTo.qMorphCancel = void 0\n          cancelStatus = true\n          cleanup()\n        }\n\n        animationTo.addEventListener('finish', cleanup)\n        animationTo.addEventListener('cancel', cleanup)\n\n        cancel = abort => {\n          // we are not in a morph that we can cancel\n          if (cancelStatus === true || animationTo === void 0) {\n            return false\n          }\n\n          if (abort === true) {\n            cleanup(true)\n            return true\n          }\n\n          endElementTo = endElementTo !== true\n\n          animationFromClone !== void 0 && animationFromClone.reverse()\n          animationFromTween !== void 0 && animationFromTween.reverse()\n          animationToClone !== void 0 && animationToClone.reverse()\n          animationTo.reverse()\n\n          return true\n        }\n      }\n      else {\n        const qAnimId = `q-morph-anim-${ ++id }`\n        const style = document.createElement('style')\n        const resizeFrom = options.resize === true\n          ? `\n            transform: translate(${ deltaX }px, ${ deltaY }px);\n            width: ${ elFromCloneWidth }px;\n            height: ${ elFromCloneHeight }px;\n          `\n          : `transform: translate(${ deltaX }px, ${ deltaY }px) scale(${ scaleX }, ${ scaleY });`\n        const resizeTo = options.resize === true\n          ? `\n            width: ${ elToCloneWidth }px;\n            height: ${ elToCloneHeight }px;\n          `\n          : ''\n        const resizeFromTween = options.resize === true\n          ? `\n            width: ${ elFromCloneWidth }px;\n            height: ${ elFromCloneHeight }px;\n          `\n          : ''\n        const resizeToTween = options.resize === true\n          ? `\n            transform: translate(${ -1 * deltaX }px, ${ -1 * deltaY }px);\n            width: ${ elToCloneWidth }px;\n            height: ${ elToCloneHeight }px;\n          `\n          : `transform: translate(${ -1 * deltaX }px, ${ -1 * deltaY }px) scale(${ 1 / scaleX }, ${ 1 / scaleY });`\n        const tweenFrom = elFromTween !== void 0\n          ? `opacity: ${ options.tweenToOpacity };`\n          : `background-color: ${ elFromBackground };`\n        const tweenTo = elFromTween !== void 0\n          ? 'opacity: 1;'\n          : `background-color: ${ elToBackground };`\n        const keyframesFromTween = elFromTween === void 0\n          ? ''\n          : `\n            @keyframes ${ qAnimId }-from-tween {\n              0% {\n                opacity: ${ options.tweenFromOpacity };\n                margin: 0;\n                border-width: ${ elFromBorderWidth };\n                border-style: ${ elFromBorderStyle };\n                border-color: ${ elFromBorderColor };\n                border-radius: ${ elFromBorderRadius };\n                z-index: ${ elFromZIndex };\n                transform-origin: 0 0;\n                transform: ${ elFromTransform };\n                ${ resizeFromTween }\n              }\n\n              100% {\n                opacity: 0;\n                margin: 0;\n                border-width: ${ elToBorderWidth };\n                border-style: ${ elToBorderStyle };\n                border-color: ${ elToBorderColor };\n                border-radius: ${ elToBorderRadius };\n                z-index: ${ elToZIndex };\n                transform-origin: 0 0;\n                ${ resizeToTween }\n              }\n            }\n          `\n        const keyframesFrom = options.hideFromClone === true || elSharedSize === true\n          ? ''\n          : `\n            @keyframes ${ qAnimId }-from {\n              0% {\n                margin: ${ elFromParentHeightDiff < 0 ? elFromParentHeightDiff / 2 : 0 }px ${ elFromParentWidthDiff < 0 ? elFromParentWidthDiff / 2 : 0 }px;\n                width: ${ elFromCloneWidth + elFromPosition.marginH }px;\n                height: ${ elFromCloneHeight + elFromPosition.marginV }px;\n              }\n\n              100% {\n                margin: 0;\n                width: 0;\n                height: 0;\n              }\n            }\n          `\n        const keyframeToStart = elSharedSize === true\n          ? `\n            margin: ${ elFromParentHeightDiff < 0 ? elFromParentHeightDiff / 2 : 0 }px ${ elFromParentWidthDiff < 0 ? elFromParentWidthDiff / 2 : 0 }px;\n            width: ${ elFromCloneWidth + elFromPosition.marginH }px;\n            height: ${ elFromCloneHeight + elFromPosition.marginV }px;\n          `\n          : `\n            margin: 0;\n            width: 0;\n            height: 0;\n          `\n        const keyframesTo = options.keepToClone === true\n          ? ''\n          : `\n            @keyframes ${ qAnimId }-to {\n              0% {\n                ${ keyframeToStart }\n              }\n\n              100% {\n                margin: ${ elToParentHeightDiff < 0 ? elToParentHeightDiff / 2 : 0 }px ${ elToParentWidthDiff < 0 ? elToParentWidthDiff / 2 : 0 }px;\n                width: ${ elToCloneWidth + elToPosition.marginH }px;\n                height: ${ elToCloneHeight + elToPosition.marginV }px;\n              }\n            }\n          `\n        style.innerHTML = `\n          @keyframes ${ qAnimId } {\n            0% {\n              margin: 0;\n              border-width: ${ elFromBorderWidth };\n              border-style: ${ elFromBorderStyle };\n              border-color: ${ elFromBorderColor };\n              border-radius: ${ elFromBorderRadius };\n              background-color: ${ elFromBackground };\n              z-index: ${ elFromZIndex };\n              transform-origin: 0 0;\n              ${ resizeFrom }\n              ${ tweenFrom }\n            }\n\n            100% {\n              margin: 0;\n              border-width: ${ elToBorderWidth };\n              border-style: ${ elToBorderStyle };\n              border-color: ${ elToBorderColor };\n              border-radius: ${ elToBorderRadius };\n              background-color: ${ elToBackground };\n              z-index: ${ elToZIndex };\n              transform-origin: 0 0;\n              transform: ${ elToTransform };\n              ${ resizeTo }\n              ${ tweenTo }\n            }\n          }\n\n          ${ keyframesFrom }\n\n          ${ keyframesFromTween }\n\n          ${ keyframesTo }\n        `\n        document.head.appendChild(style)\n\n        let animationDirection = 'normal'\n\n        elFromClone.style.animation = `${ options.duration }ms ${ options.easing } ${ options.delay }ms ${ animationDirection } ${ options.fill } ${ qAnimId }-from`\n        if (elFromTween !== void 0) {\n          elFromTween.style.animation = `${ options.duration }ms ${ options.easing } ${ options.delay }ms ${ animationDirection } ${ options.fill } ${ qAnimId }-from-tween`\n        }\n        elToClone.style.animation = `${ options.duration }ms ${ options.easing } ${ options.delay }ms ${ animationDirection } ${ options.fill } ${ qAnimId }-to`\n        elTo.style.animation = `${ options.duration }ms ${ options.easing } ${ options.delay }ms ${ animationDirection } ${ options.fill } ${ qAnimId }`\n\n        const cleanup = evt => {\n          if (evt === Object(evt) && evt.animationName !== qAnimId) {\n            return\n          }\n\n          elTo.removeEventListener('animationend', cleanup)\n          elTo.removeEventListener('animationcancel', cleanup)\n\n          commonCleanup()\n\n          // we clean the animations\n          style.remove()\n        }\n\n        elFrom.qMorphCancel = () => {\n          elFrom.qMorphCancel = void 0\n          cancelStatus = true\n          cleanup()\n        }\n        elTo.qMorphCancel = () => {\n          elTo.qMorphCancel = void 0\n          cancelStatus = true\n          cleanup()\n        }\n\n        elTo.addEventListener('animationend', cleanup)\n        elTo.addEventListener('animationcancel', cleanup)\n\n        cancel = abort => {\n          // we are not in a morph that we can cancel\n          if (cancelStatus === true || !elTo || !elFromClone || !elToClone) {\n            return false\n          }\n\n          if (abort === true) {\n            cleanup()\n\n            return true\n          }\n\n          endElementTo = endElementTo !== true\n\n          animationDirection = animationDirection === 'normal' ? 'reverse' : 'normal'\n\n          elFromClone.style.animationDirection = animationDirection\n          elFromTween.style.animationDirection = animationDirection\n          elToClone.style.animationDirection = animationDirection\n          elTo.style.animationDirection = animationDirection\n\n          return true\n        }\n      }\n    }\n\n    if (\n      options.waitFor > 0\n      || options.waitFor === 'transitionend'\n      || (options.waitFor === Object(options.waitFor) && typeof options.waitFor.then === 'function')\n    ) {\n      const delayPromise = options.waitFor > 0\n        ? new Promise(resolve => setTimeout(resolve, options.waitFor))\n        : (\n            options.waitFor === 'transitionend'\n              ? new Promise(resolve => {\n                const timer = setTimeout(() => {\n                  endFn()\n                }, 400)\n\n                const endFn = ev => {\n                  clearTimeout(timer)\n\n                  if (elTo) {\n                    elTo.removeEventListener('transitionend', endFn)\n                    elTo.removeEventListener('transitioncancel', endFn)\n                  }\n\n                  resolve()\n                }\n\n                elTo.addEventListener('transitionend', endFn)\n                elTo.addEventListener('transitioncancel', endFn)\n              })\n              : options.waitFor\n          )\n\n      delayPromise\n        .then(animate)\n        .catch(() => {\n          typeof elTo.qMorphCancel === 'function' && elTo.qMorphCancel()\n        })\n    }\n    else {\n      animate()\n    }\n  }\n\n  typeof _options.onToggle === 'function' && _options.onToggle()\n  requestAnimationFrame(calculateFinalState)\n\n  // we return the cancel function\n  // returns:\n  //   false if the cancel cannot be performed (the morph ended already or has not started)\n  //   true else\n  return abort => cancel(abort)\n}\n"]}]}