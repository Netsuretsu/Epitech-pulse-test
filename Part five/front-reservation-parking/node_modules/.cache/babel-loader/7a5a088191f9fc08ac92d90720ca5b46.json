{"remainingRequest":"/home/netsuretsu/Rendu/Epitech-pulse-test/Part five/front-reservation-parking/node_modules/babel-loader/lib/index.js!/home/netsuretsu/Rendu/Epitech-pulse-test/Part five/front-reservation-parking/node_modules/vue-cli-plugin-quasar/lib/loader.js.transform-quasar-imports.js!/home/netsuretsu/Rendu/Epitech-pulse-test/Part five/front-reservation-parking/node_modules/quasar/src/composables/private/use-file.js","dependencies":[{"path":"/home/netsuretsu/Rendu/Epitech-pulse-test/Part five/front-reservation-parking/node_modules/quasar/src/composables/private/use-file.js","mtime":1645750057943},{"path":"/home/netsuretsu/Rendu/Epitech-pulse-test/Part five/front-reservation-parking/babel.config.js","mtime":1646391901612},{"path":"/home/netsuretsu/Rendu/Epitech-pulse-test/Part five/front-reservation-parking/node_modules/cache-loader/dist/cjs.js","mtime":1645750062537},{"path":"/home/netsuretsu/Rendu/Epitech-pulse-test/Part five/front-reservation-parking/node_modules/babel-loader/lib/index.js","mtime":1645750062530},{"path":"/home/netsuretsu/Rendu/Epitech-pulse-test/Part five/front-reservation-parking/node_modules/vue-cli-plugin-quasar/lib/loader.js.transform-quasar-imports.js","mtime":1645750100417}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZm9yLWVhY2guanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudG8tc3RyaW5nLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5mb3ItZWFjaC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm51bWJlci5jb25zdHJ1Y3Rvci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5Lm1hcC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC5leGVjLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnNwbGl0LmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnRyaW0uanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuZW5kcy13aXRoLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuc2xpY2UuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5wYXJzZS1pbnQuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5mcm9tLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLml0ZXJhdG9yLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuaW5kZXgtb2YuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5zb21lLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnN0YXJ0cy13aXRoLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmluY2x1ZGVzLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLmluY2x1ZGVzLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkucmVkdWNlLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmlsdGVyLmpzIjsKaW1wb3J0IHsgaCwgY29tcHV0ZWQsIGdldEN1cnJlbnRJbnN0YW5jZSB9IGZyb20gJ3Z1ZSc7CmltcG9ydCB7IHN0b3AsIHN0b3BBbmRQcmV2ZW50IH0gZnJvbSAnLi4vLi4vdXRpbHMvZXZlbnQuanMnOwoKZnVuY3Rpb24gZmlsdGVyRmlsZXMoZmlsZXMsIHJlamVjdGVkRmlsZXMsIGZhaWxlZFByb3BWYWxpZGF0aW9uLCBmaWx0ZXJGbikgewogIHZhciBhY2NlcHRlZEZpbGVzID0gW107CiAgZmlsZXMuZm9yRWFjaChmdW5jdGlvbiAoZmlsZSkgewogICAgaWYgKGZpbHRlckZuKGZpbGUpID09PSB0cnVlKSB7CiAgICAgIGFjY2VwdGVkRmlsZXMucHVzaChmaWxlKTsKICAgIH0gZWxzZSB7CiAgICAgIHJlamVjdGVkRmlsZXMucHVzaCh7CiAgICAgICAgZmFpbGVkUHJvcFZhbGlkYXRpb246IGZhaWxlZFByb3BWYWxpZGF0aW9uLAogICAgICAgIGZpbGU6IGZpbGUKICAgICAgfSk7CiAgICB9CiAgfSk7CiAgcmV0dXJuIGFjY2VwdGVkRmlsZXM7Cn0KCmZ1bmN0aW9uIHN0b3BBbmRQcmV2ZW50RHJhZyhlKSB7CiAgZSAmJiBlLmRhdGFUcmFuc2ZlciAmJiAoZS5kYXRhVHJhbnNmZXIuZHJvcEVmZmVjdCA9ICdjb3B5Jyk7CiAgc3RvcEFuZFByZXZlbnQoZSk7Cn0KCmV4cG9ydCB2YXIgdXNlRmlsZVByb3BzID0gewogIG11bHRpcGxlOiBCb29sZWFuLAogIGFjY2VwdDogU3RyaW5nLAogIGNhcHR1cmU6IFN0cmluZywKICBtYXhGaWxlU2l6ZTogW051bWJlciwgU3RyaW5nXSwKICBtYXhUb3RhbFNpemU6IFtOdW1iZXIsIFN0cmluZ10sCiAgbWF4RmlsZXM6IFtOdW1iZXIsIFN0cmluZ10sCiAgZmlsdGVyOiBGdW5jdGlvbgp9OwpleHBvcnQgdmFyIHVzZUZpbGVFbWl0cyA9IFsncmVqZWN0ZWQnXTsKZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gKF9yZWYpIHsKICB2YXIgZWRpdGFibGUgPSBfcmVmLmVkaXRhYmxlLAogICAgICBkbmQgPSBfcmVmLmRuZCwKICAgICAgZ2V0RmlsZUlucHV0ID0gX3JlZi5nZXRGaWxlSW5wdXQsCiAgICAgIGFkZEZpbGVzVG9RdWV1ZSA9IF9yZWYuYWRkRmlsZXNUb1F1ZXVlOwoKICB2YXIgX2dldEN1cnJlbnRJbnN0YW5jZSA9IGdldEN1cnJlbnRJbnN0YW5jZSgpLAogICAgICBwcm9wcyA9IF9nZXRDdXJyZW50SW5zdGFuY2UucHJvcHMsCiAgICAgIGVtaXQgPSBfZ2V0Q3VycmVudEluc3RhbmNlLmVtaXQsCiAgICAgIHByb3h5ID0gX2dldEN1cnJlbnRJbnN0YW5jZS5wcm94eTsKCiAgdmFyIGV4dGVuc2lvbnMgPSBjb21wdXRlZChmdW5jdGlvbiAoKSB7CiAgICByZXR1cm4gcHJvcHMuYWNjZXB0ICE9PSB2b2lkIDAgPyBwcm9wcy5hY2NlcHQuc3BsaXQoJywnKS5tYXAoZnVuY3Rpb24gKGV4dCkgewogICAgICBleHQgPSBleHQudHJpbSgpOwoKICAgICAgaWYgKGV4dCA9PT0gJyonKSB7CiAgICAgICAgLy8gc3VwcG9ydCAiKiIKICAgICAgICByZXR1cm4gJyovJzsKICAgICAgfSBlbHNlIGlmIChleHQuZW5kc1dpdGgoJy8qJykpIHsKICAgICAgICAvLyBzdXBwb3J0ICJpbWFnZS8qIiBvciAiKi8qIgogICAgICAgIGV4dCA9IGV4dC5zbGljZSgwLCBleHQubGVuZ3RoIC0gMSk7CiAgICAgIH0KCiAgICAgIHJldHVybiBleHQudG9VcHBlckNhc2UoKTsKICAgIH0pIDogbnVsbDsKICB9KTsKICB2YXIgbWF4RmlsZXNOdW1iZXIgPSBjb21wdXRlZChmdW5jdGlvbiAoKSB7CiAgICByZXR1cm4gcGFyc2VJbnQocHJvcHMubWF4RmlsZXMsIDEwKTsKICB9KTsKICB2YXIgbWF4VG90YWxTaXplTnVtYmVyID0gY29tcHV0ZWQoZnVuY3Rpb24gKCkgewogICAgcmV0dXJuIHBhcnNlSW50KHByb3BzLm1heFRvdGFsU2l6ZSwgMTApOwogIH0pOwoKICBmdW5jdGlvbiBwaWNrRmlsZXMoZSkgewogICAgaWYgKGVkaXRhYmxlLnZhbHVlKSB7CiAgICAgIGlmIChlICE9PSBPYmplY3QoZSkpIHsKICAgICAgICBlID0gewogICAgICAgICAgdGFyZ2V0OiBudWxsCiAgICAgICAgfTsKICAgICAgfQoKICAgICAgaWYgKGUudGFyZ2V0ICE9PSBudWxsICYmIGUudGFyZ2V0Lm1hdGNoZXMoJ2lucHV0W3R5cGU9ImZpbGUiXScpID09PSB0cnVlKSB7CiAgICAgICAgLy8gc3RvcCBwcm9wYWdhdGlvbiBpZiBpdCdzIG5vdCBhIHJlYWwgcG9pbnRlciBldmVudAogICAgICAgIGUuY2xpZW50WCA9PT0gMCAmJiBlLmNsaWVudFkgPT09IDAgJiYgc3RvcChlKTsKICAgICAgfSBlbHNlIHsKICAgICAgICB2YXIgaW5wdXQgPSBnZXRGaWxlSW5wdXQoKTsKICAgICAgICBpbnB1dCAmJiBpbnB1dCAhPT0gZS50YXJnZXQgJiYgaW5wdXQuY2xpY2soZSk7CiAgICAgIH0KICAgIH0KICB9CgogIGZ1bmN0aW9uIGFkZEZpbGVzKGZpbGVzKSB7CiAgICBpZiAoZWRpdGFibGUudmFsdWUgJiYgZmlsZXMpIHsKICAgICAgYWRkRmlsZXNUb1F1ZXVlKG51bGwsIGZpbGVzKTsKICAgIH0KICB9CgogIGZ1bmN0aW9uIHByb2Nlc3NGaWxlcyhlLCBmaWxlc1RvUHJvY2VzcywgY3VycmVudEZpbGVMaXN0LCBhcHBlbmQpIHsKICAgIHZhciBmaWxlcyA9IEFycmF5LmZyb20oZmlsZXNUb1Byb2Nlc3MgfHwgZS50YXJnZXQuZmlsZXMpOwogICAgdmFyIHJlamVjdGVkRmlsZXMgPSBbXTsKCiAgICB2YXIgZG9uZSA9IGZ1bmN0aW9uIGRvbmUoKSB7CiAgICAgIGlmIChyZWplY3RlZEZpbGVzLmxlbmd0aCA+IDApIHsKICAgICAgICBlbWl0KCdyZWplY3RlZCcsIHJlamVjdGVkRmlsZXMpOwogICAgICB9CiAgICB9OyAvLyBmaWx0ZXIgZmlsZSB0eXBlcwoKCiAgICBpZiAocHJvcHMuYWNjZXB0ICE9PSB2b2lkIDAgJiYgZXh0ZW5zaW9ucy52YWx1ZS5pbmRleE9mKCcqLycpID09PSAtMSkgewogICAgICBmaWxlcyA9IGZpbHRlckZpbGVzKGZpbGVzLCByZWplY3RlZEZpbGVzLCAnYWNjZXB0JywgZnVuY3Rpb24gKGZpbGUpIHsKICAgICAgICByZXR1cm4gZXh0ZW5zaW9ucy52YWx1ZS5zb21lKGZ1bmN0aW9uIChleHQpIHsKICAgICAgICAgIHJldHVybiBmaWxlLnR5cGUudG9VcHBlckNhc2UoKS5zdGFydHNXaXRoKGV4dCkgfHwgZmlsZS5uYW1lLnRvVXBwZXJDYXNlKCkuZW5kc1dpdGgoZXh0KTsKICAgICAgICB9KTsKICAgICAgfSk7CgogICAgICBpZiAoZmlsZXMubGVuZ3RoID09PSAwKSB7CiAgICAgICAgcmV0dXJuIGRvbmUoKTsKICAgICAgfQogICAgfSAvLyBmaWx0ZXIgbWF4IGZpbGUgc2l6ZQoKCiAgICBpZiAocHJvcHMubWF4RmlsZVNpemUgIT09IHZvaWQgMCkgewogICAgICB2YXIgbWF4RmlsZVNpemUgPSBwYXJzZUludChwcm9wcy5tYXhGaWxlU2l6ZSwgMTApOwogICAgICBmaWxlcyA9IGZpbHRlckZpbGVzKGZpbGVzLCByZWplY3RlZEZpbGVzLCAnbWF4LWZpbGUtc2l6ZScsIGZ1bmN0aW9uIChmaWxlKSB7CiAgICAgICAgcmV0dXJuIGZpbGUuc2l6ZSA8PSBtYXhGaWxlU2l6ZTsKICAgICAgfSk7CgogICAgICBpZiAoZmlsZXMubGVuZ3RoID09PSAwKSB7CiAgICAgICAgcmV0dXJuIGRvbmUoKTsKICAgICAgfQogICAgfSAvLyBDb3Jkb3ZhL2lPUyBhbGxvd3Mgc2VsZWN0aW5nIG11bHRpcGxlIGZpbGVzIGV2ZW4gd2hlbiB0aGUKICAgIC8vIG11bHRpcGxlIGF0dHJpYnV0ZSBpcyBub3Qgc3BlY2lmaWVkLiBXZSBhbHNvIG5vcm1hbGl6ZSBkcmFnJ24nZHJvcHBlZAogICAgLy8gZmlsZXMgaGVyZToKCgogICAgaWYgKHByb3BzLm11bHRpcGxlICE9PSB0cnVlKSB7CiAgICAgIGZpbGVzID0gW2ZpbGVzWzBdXTsKICAgIH0gLy8gQ29tcHV0ZSBrZXkgdG8gdXNlIGZvciBlYWNoIGZpbGUKCgogICAgZmlsZXMuZm9yRWFjaChmdW5jdGlvbiAoZmlsZSkgewogICAgICBmaWxlLl9fa2V5ID0gZmlsZS53ZWJraXRSZWxhdGl2ZVBhdGggKyBmaWxlLmxhc3RNb2RpZmllZCArIGZpbGUubmFtZSArIGZpbGUuc2l6ZTsKICAgIH0pOyAvLyBBdm9pZCBkdXBsaWNhdGUgZmlsZXMKCiAgICB2YXIgZmlsZW5hbWVNYXAgPSBjdXJyZW50RmlsZUxpc3QubWFwKGZ1bmN0aW9uIChlbnRyeSkgewogICAgICByZXR1cm4gZW50cnkuX19rZXk7CiAgICB9KTsKICAgIGZpbGVzID0gZmlsdGVyRmlsZXMoZmlsZXMsIHJlamVjdGVkRmlsZXMsICdkdXBsaWNhdGUnLCBmdW5jdGlvbiAoZmlsZSkgewogICAgICByZXR1cm4gZmlsZW5hbWVNYXAuaW5jbHVkZXMoZmlsZS5fX2tleSkgPT09IGZhbHNlOwogICAgfSk7CgogICAgaWYgKGZpbGVzLmxlbmd0aCA9PT0gMCkgewogICAgICByZXR1cm4gZG9uZSgpOwogICAgfQoKICAgIGlmIChwcm9wcy5tYXhUb3RhbFNpemUgIT09IHZvaWQgMCkgewogICAgICB2YXIgc2l6ZSA9IGFwcGVuZCA9PT0gdHJ1ZSA/IGN1cnJlbnRGaWxlTGlzdC5yZWR1Y2UoZnVuY3Rpb24gKHRvdGFsLCBmaWxlKSB7CiAgICAgICAgcmV0dXJuIHRvdGFsICsgZmlsZS5zaXplOwogICAgICB9LCAwKSA6IDA7CiAgICAgIGZpbGVzID0gZmlsdGVyRmlsZXMoZmlsZXMsIHJlamVjdGVkRmlsZXMsICdtYXgtdG90YWwtc2l6ZScsIGZ1bmN0aW9uIChmaWxlKSB7CiAgICAgICAgc2l6ZSArPSBmaWxlLnNpemU7CiAgICAgICAgcmV0dXJuIHNpemUgPD0gbWF4VG90YWxTaXplTnVtYmVyLnZhbHVlOwogICAgICB9KTsKCiAgICAgIGlmIChmaWxlcy5sZW5ndGggPT09IDApIHsKICAgICAgICByZXR1cm4gZG9uZSgpOwogICAgICB9CiAgICB9IC8vIGRvIHdlIGhhdmUgY3VzdG9tIGZpbHRlciBmdW5jdGlvbj8KCgogICAgaWYgKHR5cGVvZiBwcm9wcy5maWx0ZXIgPT09ICdmdW5jdGlvbicpIHsKICAgICAgdmFyIGZpbHRlcmVkRmlsZXMgPSBwcm9wcy5maWx0ZXIoZmlsZXMpOwogICAgICBmaWxlcyA9IGZpbHRlckZpbGVzKGZpbGVzLCByZWplY3RlZEZpbGVzLCAnZmlsdGVyJywgZnVuY3Rpb24gKGZpbGUpIHsKICAgICAgICByZXR1cm4gZmlsdGVyZWRGaWxlcy5pbmNsdWRlcyhmaWxlKTsKICAgICAgfSk7CiAgICB9CgogICAgaWYgKHByb3BzLm1heEZpbGVzICE9PSB2b2lkIDApIHsKICAgICAgdmFyIGZpbGVzTnVtYmVyID0gYXBwZW5kID09PSB0cnVlID8gY3VycmVudEZpbGVMaXN0Lmxlbmd0aCA6IDA7CiAgICAgIGZpbGVzID0gZmlsdGVyRmlsZXMoZmlsZXMsIHJlamVjdGVkRmlsZXMsICdtYXgtZmlsZXMnLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgZmlsZXNOdW1iZXIrKzsKICAgICAgICByZXR1cm4gZmlsZXNOdW1iZXIgPD0gbWF4RmlsZXNOdW1iZXIudmFsdWU7CiAgICAgIH0pOwoKICAgICAgaWYgKGZpbGVzLmxlbmd0aCA9PT0gMCkgewogICAgICAgIHJldHVybiBkb25lKCk7CiAgICAgIH0KICAgIH0KCiAgICBkb25lKCk7CgogICAgaWYgKGZpbGVzLmxlbmd0aCA+IDApIHsKICAgICAgcmV0dXJuIGZpbGVzOwogICAgfQogIH0KCiAgZnVuY3Rpb24gb25EcmFnb3ZlcihlKSB7CiAgICBzdG9wQW5kUHJldmVudERyYWcoZSk7CiAgICBkbmQudmFsdWUgIT09IHRydWUgJiYgKGRuZC52YWx1ZSA9IHRydWUpOwogIH0KCiAgZnVuY3Rpb24gb25EcmFnbGVhdmUoZSkgewogICAgc3RvcEFuZFByZXZlbnQoZSk7CiAgICBkbmQudmFsdWUgPSBmYWxzZTsKICB9CgogIGZ1bmN0aW9uIG9uRHJvcChlKSB7CiAgICBzdG9wQW5kUHJldmVudERyYWcoZSk7CiAgICB2YXIgZmlsZXMgPSBlLmRhdGFUcmFuc2Zlci5maWxlczsKCiAgICBpZiAoZmlsZXMubGVuZ3RoID4gMCkgewogICAgICBhZGRGaWxlc1RvUXVldWUobnVsbCwgZmlsZXMpOwogICAgfQoKICAgIGRuZC52YWx1ZSA9IGZhbHNlOwogIH0KCiAgZnVuY3Rpb24gZ2V0RG5kTm9kZSh0eXBlKSB7CiAgICBpZiAoZG5kLnZhbHVlID09PSB0cnVlKSB7CiAgICAgIHJldHVybiBoKCdkaXYnLCB7CiAgICAgICAgImNsYXNzIjogInEtIi5jb25jYXQodHlwZSwgIl9fZG5kIGFic29sdXRlLWZ1bGwiKSwKICAgICAgICBvbkRyYWdlbnRlcjogc3RvcEFuZFByZXZlbnREcmFnLAogICAgICAgIG9uRHJhZ292ZXI6IHN0b3BBbmRQcmV2ZW50RHJhZywKICAgICAgICBvbkRyYWdsZWF2ZTogb25EcmFnbGVhdmUsCiAgICAgICAgb25Ecm9wOiBvbkRyb3AKICAgICAgfSk7CiAgICB9CiAgfSAvLyBleHBvc2UgcHVibGljIG1ldGhvZHMKCgogIE9iamVjdC5hc3NpZ24ocHJveHksIHsKICAgIHBpY2tGaWxlczogcGlja0ZpbGVzLAogICAgYWRkRmlsZXM6IGFkZEZpbGVzCiAgfSk7CiAgcmV0dXJuIHsKICAgIHBpY2tGaWxlczogcGlja0ZpbGVzLAogICAgYWRkRmlsZXM6IGFkZEZpbGVzLAogICAgb25EcmFnb3Zlcjogb25EcmFnb3ZlciwKICAgIHByb2Nlc3NGaWxlczogcHJvY2Vzc0ZpbGVzLAogICAgZ2V0RG5kTm9kZTogZ2V0RG5kTm9kZSwKICAgIG1heEZpbGVzTnVtYmVyOiBtYXhGaWxlc051bWJlciwKICAgIG1heFRvdGFsU2l6ZU51bWJlcjogbWF4VG90YWxTaXplTnVtYmVyCiAgfTsKfQ=="},{"version":3,"sources":["/home/netsuretsu/Rendu/Epitech-pulse-test/Part five/front-reservation-parking/node_modules/quasar/src/composables/private/use-file.js"],"names":["h","computed","getCurrentInstance","stop","stopAndPrevent","filterFiles","files","rejectedFiles","failedPropValidation","filterFn","acceptedFiles","forEach","file","push","stopAndPreventDrag","e","dataTransfer","dropEffect","useFileProps","multiple","Boolean","accept","String","capture","maxFileSize","Number","maxTotalSize","maxFiles","filter","Function","useFileEmits","editable","dnd","getFileInput","addFilesToQueue","props","emit","proxy","extensions","split","map","ext","trim","endsWith","slice","length","toUpperCase","maxFilesNumber","parseInt","maxTotalSizeNumber","pickFiles","value","Object","target","matches","clientX","clientY","input","click","addFiles","processFiles","filesToProcess","currentFileList","append","Array","from","done","indexOf","some","type","startsWith","name","size","__key","webkitRelativePath","lastModified","filenameMap","entry","includes","reduce","total","filteredFiles","filesNumber","onDragover","onDragleave","onDrop","getDndNode","onDragenter","assign"],"mappings":"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","sourcesContent":["import { h, computed, getCurrentInstance } from 'vue'\n\nimport { stop, stopAndPrevent } from '../../utils/event.js'\n\nfunction filterFiles (files, rejectedFiles, failedPropValidation, filterFn) {\n  const acceptedFiles = []\n\n  files.forEach(file => {\n    if (filterFn(file) === true) {\n      acceptedFiles.push(file)\n    }\n    else {\n      rejectedFiles.push({ failedPropValidation, file })\n    }\n  })\n\n  return acceptedFiles\n}\n\nfunction stopAndPreventDrag (e) {\n  e && e.dataTransfer && (e.dataTransfer.dropEffect = 'copy')\n  stopAndPrevent(e)\n}\n\nexport const useFileProps = {\n  multiple: Boolean,\n  accept: String,\n  capture: String,\n  maxFileSize: [ Number, String ],\n  maxTotalSize: [ Number, String ],\n  maxFiles: [ Number, String ],\n  filter: Function\n}\n\nexport const useFileEmits = [ 'rejected' ]\n\nexport default function ({\n  editable,\n  dnd,\n  getFileInput,\n  addFilesToQueue\n}) {\n  const { props, emit, proxy } = getCurrentInstance()\n\n  const extensions = computed(() => (\n    props.accept !== void 0\n      ? props.accept.split(',').map(ext => {\n          ext = ext.trim()\n          if (ext === '*') { // support \"*\"\n            return '*/'\n          }\n          else if (ext.endsWith('/*')) { // support \"image/*\" or \"*/*\"\n            ext = ext.slice(0, ext.length - 1)\n          }\n          return ext.toUpperCase()\n        })\n      : null\n  ))\n\n  const maxFilesNumber = computed(() => parseInt(props.maxFiles, 10))\n  const maxTotalSizeNumber = computed(() => parseInt(props.maxTotalSize, 10))\n\n  function pickFiles (e) {\n    if (editable.value) {\n      if (e !== Object(e)) {\n        e = { target: null }\n      }\n\n      if (e.target !== null && e.target.matches('input[type=\"file\"]') === true) {\n        // stop propagation if it's not a real pointer event\n        e.clientX === 0 && e.clientY === 0 && stop(e)\n      }\n      else {\n        const input = getFileInput()\n        input && input !== e.target && input.click(e)\n      }\n    }\n  }\n\n  function addFiles (files) {\n    if (editable.value && files) {\n      addFilesToQueue(null, files)\n    }\n  }\n\n  function processFiles (e, filesToProcess, currentFileList, append) {\n    let files = Array.from(filesToProcess || e.target.files)\n    const rejectedFiles = []\n\n    const done = () => {\n      if (rejectedFiles.length > 0) {\n        emit('rejected', rejectedFiles)\n      }\n    }\n\n    // filter file types\n    if (props.accept !== void 0 && extensions.value.indexOf('*/') === -1) {\n      files = filterFiles(files, rejectedFiles, 'accept', file => {\n        return extensions.value.some(ext => (\n          file.type.toUpperCase().startsWith(ext)\n          || file.name.toUpperCase().endsWith(ext)\n        ))\n      })\n\n      if (files.length === 0) { return done() }\n    }\n\n    // filter max file size\n    if (props.maxFileSize !== void 0) {\n      const maxFileSize = parseInt(props.maxFileSize, 10)\n      files = filterFiles(files, rejectedFiles, 'max-file-size', file => {\n        return file.size <= maxFileSize\n      })\n\n      if (files.length === 0) { return done() }\n    }\n\n    // Cordova/iOS allows selecting multiple files even when the\n    // multiple attribute is not specified. We also normalize drag'n'dropped\n    // files here:\n    if (props.multiple !== true) {\n      files = [ files[ 0 ] ]\n    }\n\n    // Compute key to use for each file\n    files.forEach(file => {\n      file.__key = file.webkitRelativePath + file.lastModified + file.name + file.size\n    })\n\n    // Avoid duplicate files\n    const filenameMap = currentFileList.map(entry => entry.__key)\n    files = filterFiles(files, rejectedFiles, 'duplicate', file => {\n      return filenameMap.includes(file.__key) === false\n    })\n\n    if (files.length === 0) { return done() }\n\n    if (props.maxTotalSize !== void 0) {\n      let size = append === true\n        ? currentFileList.reduce((total, file) => total + file.size, 0)\n        : 0\n\n      files = filterFiles(files, rejectedFiles, 'max-total-size', file => {\n        size += file.size\n        return size <= maxTotalSizeNumber.value\n      })\n\n      if (files.length === 0) { return done() }\n    }\n\n    // do we have custom filter function?\n    if (typeof props.filter === 'function') {\n      const filteredFiles = props.filter(files)\n      files = filterFiles(files, rejectedFiles, 'filter', file => {\n        return filteredFiles.includes(file)\n      })\n    }\n\n    if (props.maxFiles !== void 0) {\n      let filesNumber = append === true\n        ? currentFileList.length\n        : 0\n\n      files = filterFiles(files, rejectedFiles, 'max-files', () => {\n        filesNumber++\n        return filesNumber <= maxFilesNumber.value\n      })\n\n      if (files.length === 0) { return done() }\n    }\n\n    done()\n\n    if (files.length > 0) {\n      return files\n    }\n  }\n\n  function onDragover (e) {\n    stopAndPreventDrag(e)\n    dnd.value !== true && (dnd.value = true)\n  }\n\n  function onDragleave (e) {\n    stopAndPrevent(e)\n    dnd.value = false\n  }\n\n  function onDrop (e) {\n    stopAndPreventDrag(e)\n    const files = e.dataTransfer.files\n\n    if (files.length > 0) {\n      addFilesToQueue(null, files)\n    }\n\n    dnd.value = false\n  }\n\n  function getDndNode (type) {\n    if (dnd.value === true) {\n      return h('div', {\n        class: `q-${ type }__dnd absolute-full`,\n        onDragenter: stopAndPreventDrag,\n        onDragover: stopAndPreventDrag,\n        onDragleave,\n        onDrop\n      })\n    }\n  }\n\n  // expose public methods\n  Object.assign(proxy, { pickFiles, addFiles })\n\n  return {\n    pickFiles,\n    addFiles,\n    onDragover,\n    processFiles,\n    getDndNode,\n    maxFilesNumber,\n    maxTotalSizeNumber\n  }\n}\n"]}]}